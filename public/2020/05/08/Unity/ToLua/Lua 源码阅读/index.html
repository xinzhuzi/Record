<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Lua æºç é˜…è¯» | æ–°è¯¸å­</title>
  <meta name="keywords" content=" ToLua ">
  <meta name="description" content="Lua æºç é˜…è¯» | æ–°è¯¸å­">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="description" content="é¡µé¢æœªæ‰¾åˆ°ï¼">
<meta property="og:type" content="website">
<meta property="og:title" content="404">
<meta property="og:url" content="http://yoursite.com/404.html">
<meta property="og:site_name" content="æ–°è¯¸å­">
<meta property="og:description" content="é¡µé¢æœªæ‰¾åˆ°ï¼">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2016-09-27T03:31:01.000Z">
<meta property="article:modified_time" content="2020-05-12T02:42:41.559Z">
<meta property="article:author" content="è¯¸å­ç™¾å®¶-è°çš„å¤©ä¸‹?">
<meta name="twitter:card" content="summary">


<link rel="icon" href="/img/avatar.jpg">

<link href="/css/style.css?v=1.0.1" rel="stylesheet">

<link href="/css/hl_theme/darcula.css?v=1.0.1" rel="stylesheet">

<link href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css" rel="stylesheet">
<link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/fontawesome.min.js" rel="stylesheet">

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="/js/jquery.autocomplete.min.js?v=1.0.1" ></script>

<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.2/highlight.min.js"></script>
<script>
    hljs.initHighlightingOnLoad();
</script>

<script src="//cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.min.js"></script>



<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js" ></script>

<script src="/js/iconfont.js?v=1.0.1" ></script>

<meta name="generator" content="Hexo 4.2.0"></head>
<div style="display: none">
  <input class="theme_disqus_on" value="false">
  <input class="theme_preload_comment" value="true">
  <input class="theme_blog_path" value="">
</div>

<body>
<aside class="nav">
    <div class="nav-left">
        <a href="/" class="avatar_target">
    <img class="avatar" src="/img/avatar.jpg" />
</a>
<div class="author">
    <span>è¯¸å­ç™¾å®¶-è°çš„å¤©ä¸‹?</span>
</div>

<div class="icon">
    
        
        <a title="rss" href="/atom.xml" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-rss"></use>
                </svg>
            
        </a>
        
    
        
        <a title="github" href="https://github.com/xinzhuzi" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-github"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
    
        
    
        
        <a title="jianshu" href="https://www.jianshu.com/u/e7aab68810b1" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-jianshu"></use>
                </svg>
            
        </a>
        
    
        
    
        
    
        
    
        
    
        
        <a title="email" href="mailto:1487842110@qq.com" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-email"></use>
                </svg>
            
        </a>
        
    
        
        <a title="qq" href="http://wpa.qq.com/msgrd?v=3&uin=1487842110&site=qq&menu=yes" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-qq"></use>
                </svg>
            
        </a>
        
    
        
        <a title="kugou" href="https://www.kugou.com/" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-kugou"></use>
                </svg>
            
        </a>
        
    
        
        <a title="neteasemusic" href="https://music.163.com/#/user/home?id=88151013" target="_blank">
            
                <svg class="iconfont-svg" aria-hidden="true">
                    <use xlink:href="#icon-neteasemusic"></use>
                </svg>
            
        </a>
        
    
</div>




<ul>
    <li><div class="all active">å…¨éƒ¨æ–‡ç« <small>(90)</small></div></li>
    
        
            
            <li><div data-rel="ä»£ç è¯­è¨€äº¤äº’">ä»£ç è¯­è¨€äº¤äº’<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Net">Net<small>(2)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="å·¥å…·">å·¥å…·<small>(6)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="æ­£åˆ™è¡¨è¾¾å¼">æ­£åˆ™è¡¨è¾¾å¼<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="æŒ‡é’ˆ">æŒ‡é’ˆ<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Renderer">Renderer<small>(1)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="UnityEditor">UnityEditor<small>(14)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="UnityUI">UnityUI<small>(15)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="ç®—æ³•">ç®—æ³•<small>(2)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="æ‚é¡¹">æ‚é¡¹<small>(5)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Unity">Unity<small>(17)</small></div>
                
            </li>
            
        
    
        
            
            <li><div data-rel="Unityä¼˜åŒ–">Unityä¼˜åŒ–<small>(18)</small></div>
                
            </li>
            
        
    
</ul>
<div class="left-bottom">
    <div class="menus">
    
    
    
    
    </div>
    <div><a class="about  hasFriend  " target="_blank" href="/about">å…³äº</a><a style="width: 50%"  class="friends">å‹é“¾</a></div>
</div>
<input type="hidden" id="yelog_site_posts_number" value="90">
<input type="hidden" id="yelog_site_word_count" value="215.2k">
<div style="display: none">
    <span id="busuanzi_value_site_uv"></span>
    <span id="busuanzi_value_site_pv"></span>
</div>

    </div>
    <div class="nav-right">
        <div class="friends-area">
    <div class="friends-title">
        å‹æƒ…é“¾æ¥
        <i class="back-title-list"></i>
    </div>
    <div class="friends-content">
        <ul>
            
            <li><a target="_blank" href="https://github.com/xinzhuzi">è¯¸å­ç™¾å®¶-è°çš„å¤©ä¸‹?</a></li>
            
        </ul>
    </div>
</div>
        <div class="title-list">
    <form onkeydown="if(event.keyCode === 13){return false;}">
        <input id="local-search-input" class="search" type="text" placeholder="Search..." />
        <i class="cross"></i>
        <span>
            <label for="tagswitch">Tags:</label>
            <input id="tagswitch" type="checkbox" style="display: none" />
            <i id="tagsWitchIcon"></i>
        </span>
    </form>
    <div class="tags-list">
    
    <li class="article-tag-list-item">
        <a class="color4">language</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">CSharp</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">Net</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">Protobuf,lua</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">re</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">æŒ‡é’ˆ</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">Renderer</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color5">tool</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">UnityEditor</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">UnityUI</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">ç®—æ³•</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">æ‚é¡¹</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">Unity</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color4">BestHttp</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">IndustrialAutomation</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color3">Unityä¼˜åŒ–</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color1">ToLua</a>
    </li>
    
    <li class="article-tag-list-item">
        <a class="color2">VSCode</a>
    </li>
    
    <div class="clearfix"></div>
</div>

    
    <nav id="title-list-nav">
        
        <a id="top" class="ä»£ç è¯­è¨€äº¤äº’ "
           href="/2020/05/08/CodeInteraction/C#_C_C++/"
           data-tag="language"
           data-author="" >
            <span class="post-title" title="C#ä¸C/C++çš„äº¤äº’">C#ä¸C/C++çš„äº¤äº’</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="Net "
           href="/2020/05/08/Net/CSharp/"
           data-tag="CSharp"
           data-author="" >
            <span class="post-title" title="ç½‘ç»œéƒ¨åˆ†">ç½‘ç»œéƒ¨åˆ†</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="Net "
           href="/2020/05/08/Net/net/"
           data-tag="Net"
           data-author="" >
            <span class="post-title" title="ç½‘ç»œéƒ¨åˆ†">ç½‘ç»œéƒ¨åˆ†</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="å·¥å…· "
           href="/2020/05/08/Potobuf-Lua/ProtobufLua/"
           data-tag="Protobuf,lua"
           data-author="" >
            <span class="post-title" title="Protobuf-Lua-Python">Protobuf-Lua-Python</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="æ­£åˆ™è¡¨è¾¾å¼ "
           href="/2020/05/08/RegularExpression/RegularExpression/"
           data-tag="re"
           data-author="" >
            <span class="post-title" title="æ­£åˆ™è¡¨è¾¾å¼">æ­£åˆ™è¡¨è¾¾å¼</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="æŒ‡é’ˆ "
           href="/2020/05/08/Pointer/%E6%8C%87%E9%92%88/"
           data-tag="æŒ‡é’ˆ"
           data-author="" >
            <span class="post-title" title="C/C++æŒ‡é’ˆè¯¦è§£">C/C++æŒ‡é’ˆè¯¦è§£</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="Renderer "
           href="/2020/05/08/Renderer/%E6%B8%B2%E6%9F%93%E5%9F%BA%E6%9C%AC%E6%B5%81%E7%A8%8B/"
           data-tag="Renderer"
           data-author="" >
            <span class="post-title" title="æ¸²æŸ“åŸºæœ¬æµç¨‹">æ¸²æŸ“åŸºæœ¬æµç¨‹</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="å·¥å…· "
           href="/2020/05/08/Tools/%E5%A5%BD%E7%94%A8%E7%9A%84%E6%8F%92%E4%BB%B6%E8%BD%AF%E4%BB%B6/"
           data-tag="tool"
           data-author="" >
            <span class="post-title" title="å¥½ç”¨çš„æ’ä»¶è½¯ä»¶">å¥½ç”¨çš„æ’ä»¶è½¯ä»¶</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="å·¥å…· "
           href="/2020/05/08/Tools/md%E6%A0%BC%E5%BC%8F/"
           data-tag="tool"
           data-author="" >
            <span class="post-title" title="MD æ ¼å¼">MD æ ¼å¼</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="å·¥å…· "
           href="/2020/05/08/Tools/%E7%A0%B4%E8%A7%A3Teamviewer/"
           data-tag="tool"
           data-author="" >
            <span class="post-title" title="ç ´è§£ TeamViewer">ç ´è§£ TeamViewer</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="å·¥å…· "
           href="/2020/05/08/Tools/%E7%A7%91%E5%AD%A6%E4%B8%8A%E7%BD%91/"
           data-tag="tool"
           data-author="" >
            <span class="post-title" title="ç§‘å­¦ä¸Šç½‘">ç§‘å­¦ä¸Šç½‘</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/1%20%E4%BB%8B%E7%BB%8DUnityEditor/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="1 ä»‹ç»UnityEditor">1 ä»‹ç»UnityEditor</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/11%20Handles/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="11 Handles">11 Handles</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/12%20Gizmos/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="12 Gizmos">12 Gizmos</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a  class="å·¥å…· "
           href="/2020/05/08/Tools/Windows%E5%91%BD%E4%BB%A4/"
           data-tag="tool"
           data-author="" >
            <span class="post-title" title="MD æ ¼å¼">MD æ ¼å¼</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/10%20Screenshot/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="10 Screenshot">10 Screenshot</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/14%20NodeEditor/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="14 NodeEditor">14 NodeEditor</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/13%20%E7%AE%80%E5%8D%95Node/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="13 ç®€å•Node">13 ç®€å•Node</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/2%20UnityEditor%E5%B8%B8%E7%94%A8%E5%B1%9E%E6%80%A7/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="2 UnityEditorå¸¸ç”¨å±æ€§">2 UnityEditorå¸¸ç”¨å±æ€§</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/3%20%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="3 æ•°æ®äº¤äº’">3 æ•°æ®äº¤äº’</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/5%20EditorWindow/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="5 EditorWindow">5 EditorWindow</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/4%20EditorGUI/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="4 EditorGUI">4 EditorGUI</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/6%20MenuItem/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="6 MenuItem">6 MenuItem</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/7%20CustomEditor_PropertyDrawer/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="7 CustomEditor_PropertyDrawer">7 CustomEditor_PropertyDrawer</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/8%20EditorGUILayout/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="8 EditorGUILayout">8 EditorGUILayout</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityEditor "
           href="/2020/05/11/UnityEditor/9%20EditorWindow%E6%A1%88%E4%BE%8B1/"
           data-tag="UnityEditor"
           data-author="" >
            <span class="post-title" title="9 EditorWindowæ¡ˆä¾‹1">9 EditorWindowæ¡ˆä¾‹1</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E4%B8%83%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E4%B8%80%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E4%B8%89%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E4%B9%9D%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E4%BA%8C%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E5%85%AB%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E5%85%AD%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E4%BA%94%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E5%8D%81%E4%BA%8C%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E5%8D%81%E4%B8%80%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E5%8D%81%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/UGUI&TMP%20%E7%B3%BB%E5%88%97%E7%AC%AC%E5%9B%9B%E7%AB%A0/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/11/UnityUI/Unity_UGUI/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UGUIä¼˜åŒ–">Unity UGUIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/08/UnityUI/Unity_NGUI/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity NGUI">Unity NGUI</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="ç®—æ³• "
           href="/2020/05/08/algorithm/algorithm/"
           data-tag="ç®—æ³•"
           data-author="" >
            <span class="post-title" title="å­¦ä¹ ç®—æ³•å¤§çº²">å­¦ä¹ ç®—æ³•å¤§çº²</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="UnityUI "
           href="/2020/05/08/UnityUI/Unity_UI%E4%BC%98%E5%8C%96/"
           data-tag="UnityUI"
           data-author="" >
            <span class="post-title" title="Unity UIä¼˜åŒ–">Unity UIä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class="ç®—æ³• "
           href="/2020/05/08/algorithm/%E6%A1%88%E4%BE%8B/"
           data-tag="ç®—æ³•"
           data-author="" >
            <span class="post-title" title="CåŸºç¡€æ¡ˆä¾‹">CåŸºç¡€æ¡ˆä¾‹</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="æ‚é¡¹ "
           href="/2020/05/08/misc/Hexo%20%E7%9A%84%E7%AE%80%E5%8D%95%E6%93%8D%E4%BD%9C/"
           data-tag="æ‚é¡¹"
           data-author="" >
            <span class="post-title" title="Hexo çš„ç®€å•æ“ä½œ">Hexo çš„ç®€å•æ“ä½œ</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="æ‚é¡¹ "
           href="/2020/05/08/misc/Network/"
           data-tag="æ‚é¡¹"
           data-author="" >
            <span class="post-title" title="ç¨‹åºå‘˜éœ€è¦æŒæ¡çš„è‹±æ–‡å•è¯">ç¨‹åºå‘˜éœ€è¦æŒæ¡çš„è‹±æ–‡å•è¯</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="æ‚é¡¹ "
           href="/2020/05/08/misc/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E4%BB%A5%E5%8F%8A%E7%BC%96%E5%86%99/"
           data-tag="æ‚é¡¹"
           data-author="" >
            <span class="post-title" title="åšå®¢æ­å»ºä»¥åŠç¼–å†™">åšå®¢æ­å»ºä»¥åŠç¼–å†™</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="æ‚é¡¹ "
           href="/2020/05/08/misc/%E8%AF%97%E8%AF%8D%E9%9A%8F%E7%AC%94/"
           data-tag="æ‚é¡¹"
           data-author="" >
            <span class="post-title" title="è¯—è¯éšç¬”">è¯—è¯éšç¬”</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="æ‚é¡¹ "
           href="/2020/05/08/misc/%E5%85%B1%E4%BA%A7%E5%85%9A%E5%AE%A3%E8%A8%80/"
           data-tag="æ‚é¡¹"
           data-author="" >
            <span class="post-title" title="å…±äº§å…šå®£è¨€">å…±äº§å…šå®£è¨€</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/08/Unity/AssetBundles/AssetBundle/"
           data-tag="Unity"
           data-author="" >
            <span class="post-title" title="AssetBundle ä»‹ç»">AssetBundle ä»‹ç»</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/11/Unity/FrameSynchronization/FrameSync/"
           data-tag="Unity"
           data-author="" >
            <span class="post-title" title="å¸§åŒæ­¥">å¸§åŒæ­¥</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/11/Unity/BestHttp/WebSocket/"
           data-tag="BestHttp"
           data-author="" >
            <span class="post-title" title="BestHttpä»‹ç»2">BestHttpä»‹ç»2</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/11/Unity/BestHttp/BestHttp%E4%BB%8B%E7%BB%8D/"
           data-tag="BestHttp"
           data-author="" >
            <span class="post-title" title="BestHttpä»‹ç»1">BestHttpä»‹ç»1</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a  class="Unity "
           href="/2020/05/08/Unity/AssetBundles/%E6%89%93%E5%8C%85%E7%AD%96%E7%95%A5/"
           data-tag="Unity"
           data-author="" >
            <span class="post-title" title="AssetBundle æ‰“åŒ…ç­–ç•¥">AssetBundle æ‰“åŒ…ç­–ç•¥</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/06/20/Unity/IndustrialAutomation/Unity%E5%90%8E%E5%B7%A5%E4%B8%9A%E5%8C%96%E6%B5%81%E7%A8%8B1/"
           data-tag="IndustrialAutomation"
           data-author="" >
            <span class="post-title" title="Unityåå·¥ä¸šåŒ–æµç¨‹1">Unityåå·¥ä¸šåŒ–æµç¨‹1</span>
            <span class="post-date" title="2020-06-20 11:41:32">2020/06/20</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/11/Unity/OcclusionCulling/Occlusion%20Culling/"
           data-tag="Unity"
           data-author="" >
            <span class="post-title" title="å„ä¸ªå¹³å°çš„è·¯å¾„">å„ä¸ªå¹³å°çš„è·¯å¾„</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/AndroidStudio/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity AndroidStudioå·¥å…·æ£€æµ‹ä¼˜åŒ–">Unity AndroidStudioå·¥å…·æ£€æµ‹ä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/CPU%E4%BC%98%E5%8C%96/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity CPUä¼˜åŒ–">Unity CPUä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/GPU%E4%BC%98%E5%8C%96/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity GPUä¼˜åŒ–">Unity GPUä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/06/20/Unity/IndustrialAutomation/Unity%E5%90%8E%E5%B7%A5%E4%B8%9A%E5%8C%96%E6%B5%81%E7%A8%8B2/"
           data-tag="IndustrialAutomation"
           data-author="" >
            <span class="post-title" title="Unityåå·¥ä¸šåŒ–æµç¨‹2">Unityåå·¥ä¸šåŒ–æµç¨‹2</span>
            <span class="post-date" title="2020-06-20 11:41:32">2020/06/20</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/OverDraw/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity OverDrawä¼˜åŒ–">Unity OverDrawä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/GC/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity GC">Unity GC</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/Unity%E4%BC%98%E5%8C%96%E6%80%BB%E7%BA%B2/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity ä¼˜åŒ–æ€»çº²">Unity ä¼˜åŒ–æ€»çº²</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/UnityStats/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity OverDrawä¼˜åŒ–">Unity OverDrawä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/UWA%E4%BC%98%E5%8C%96/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity UWAå·¥å…·æ£€æµ‹ä¼˜åŒ–">Unity UWAå·¥å…·æ£€æµ‹ä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/Unity%E5%86%85%E5%AD%98%E4%BC%98%E5%8C%96/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity å†…å­˜ä¼˜åŒ–">Unity å†…å­˜ä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/Unity%E5%B8%A7%E7%8E%87/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity ä¼˜åŒ–æ€»çº²">Unity ä¼˜åŒ–æ€»çº²</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/XCode/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity Xcodeå·¥å…·æ£€æµ‹ä¼˜åŒ–">Unity Xcodeå·¥å…·æ£€æµ‹ä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/Unity%E5%B7%A5%E5%85%B7/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unityå·¥å…·ä½¿ç”¨">Unityå·¥å…·ä½¿ç”¨</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/Unity%E5%B7%A5%E5%85%B7UPR/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unityå·¥å…·UPR">Unityå·¥å…·UPR</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/Unity%E6%B8%B2%E6%9F%93%E4%BC%98%E5%8C%96/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity æ¸²æŸ“ä¼˜åŒ–">Unity æ¸²æŸ“ä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/%E4%BB%A3%E7%A0%81%E7%BC%96%E5%86%99%E8%A7%84%E8%8C%83/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity ä»£ç ç¼–å†™è§„èŒƒ">Unity ä»£ç ç¼–å†™è§„èŒƒ</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/%E6%B5%AE%E7%82%B9%E6%95%B0%E7%B2%BE%E5%BA%A6/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity  æµ®ç‚¹æ•°ç²¾åº¦">Unity  æµ®ç‚¹æ•°ç²¾åº¦</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/Unity%E8%B5%84%E6%BA%90%E4%BC%98%E5%8C%96/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity èµ„æºä¼˜åŒ–">Unity èµ„æºä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/11/Unity/Path/%E5%B9%B3%E5%8F%B0%E8%B7%AF%E5%BE%84/"
           data-tag="Unity"
           data-author="" >
            <span class="post-title" title="å„ä¸ªå¹³å°çš„è·¯å¾„">å„ä¸ªå¹³å°çš„è·¯å¾„</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="Unityä¼˜åŒ– "
           href="/2020/05/08/Unity/Optimize/%E7%BD%91%E7%BB%9C%E4%BC%98%E5%8C%96/"
           data-tag="Unityä¼˜åŒ–"
           data-author="" >
            <span class="post-title" title="Unity ç½‘ç»œä¼˜åŒ–">Unity ç½‘ç»œä¼˜åŒ–</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/08/Unity/ToLua/ToLua%20C#_Lua%20%E4%BA%A4%E4%BA%92/"
           data-tag="ToLua"
           data-author="" >
            <span class="post-title" title="Tolua C# Lua äº¤äº’">Tolua C# Lua äº¤äº’</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/08/Unity/ToLua/ToLua%20C_C++_C#%E4%BA%A4%E4%BA%92/"
           data-tag="ToLua"
           data-author="" >
            <span class="post-title" title="ToLua C/C++ C# äº¤äº’">ToLua C/C++ C# äº¤äº’</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/08/Unity/ToLua/Lua%20%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/"
           data-tag="ToLua"
           data-author="" >
            <span class="post-title" title="Lua æºç é˜…è¯»">Lua æºç é˜…è¯»</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/08/Unity/ToLua/ToLua%20C_C++_Lua%E4%BA%A4%E4%BA%92/"
           data-tag="ToLua"
           data-author="" >
            <span class="post-title" title="Tolua C/C++ Lua äº¤äº’">Tolua C/C++ Lua äº¤äº’</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/11/Unity/Utils/%E5%B0%8F%E6%8A%80%E5%B7%A7/"
           data-tag="Unity"
           data-author="" >
            <span class="post-title" title="å›¾ç‰‡ä¸å­—ç¬¦ä¸²äº’è½¬">å›¾ç‰‡ä¸å­—ç¬¦ä¸²äº’è½¬</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/08/Unity/ToLua/%E5%A4%A7%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92%E6%80%A7%E8%83%BD/"
           data-tag="ToLua"
           data-author="" >
            <span class="post-title" title="Tolua ä»‹ç»">Tolua ä»‹ç»</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/11/Unity/VisualStudioCode/VSCodeUnity/"
           data-tag="VSCode"
           data-author="" >
            <span class="post-title" title="åœ¨ Unity ä¸‹ä½¿ç”¨ VSCode é…ç½®">åœ¨ Unity ä¸‹ä½¿ç”¨ VSCode é…ç½®</span>
            <span class="post-date" title="2020-05-11 11:41:32">2020/05/11</span>
        </a>
        
        <a id="top" class="Unity "
           href="/2020/05/08/Unity/ToLua/ToLua%20%E4%BB%8B%E7%BB%8D/"
           data-tag="ToLua"
           data-author="" >
            <span class="post-title" title="Tolua ä»‹ç»">Tolua ä»‹ç»</span>
            <span class="post-date" title="2020-05-08 11:41:32">2020/05/08</span>
        </a>
        
        <a  class=""
           href="/2020/12/18/Unity/ToLua/Lua%20%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Lua-5.1.4-codedump/doc/lua/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/lua">Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/lua</span>
            <span class="post-date" title="2020-12-18 11:53:11">2020/12/18</span>
        </a>
        
        <a  class=""
           href="/2020/12/18/Unity/ToLua/Lua%20%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Lua-5.1.4-codedump/doc/lua/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/lua">Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/lua</span>
            <span class="post-date" title="2020-12-18 11:53:11">2020/12/18</span>
        </a>
        
        <a  class=""
           href="/2020/12/18/Unity/ToLua/Lua%20%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Lua-5.1.4-codedump/doc/manual/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/manual">Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/manual</span>
            <span class="post-date" title="2020-12-18 11:53:11">2020/12/18</span>
        </a>
        
        <a  class=""
           href="/2020/12/18/Unity/ToLua/Lua%20%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Lua-5.1.4-codedump/doc/luac/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/luac">Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/luac</span>
            <span class="post-date" title="2020-12-18 11:53:11">2020/12/18</span>
        </a>
        
        <a  class=""
           href="/2020/12/18/Unity/ToLua/Lua%20%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Lua-5.1.4-codedump/doc/readme/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/readme">Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/readme</span>
            <span class="post-date" title="2020-12-18 11:53:11">2020/12/18</span>
        </a>
        
        <a  class=""
           href="/2020/12/18/Unity/ToLua/Lua%20%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Lua-5.1.4-codedump/doc/contents/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/contents">Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/contents</span>
            <span class="post-date" title="2020-12-18 11:53:11">2020/12/18</span>
        </a>
        
        <a  class=""
           href="/2020/12/18/Unity/ToLua/Lua%20%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/Lua-5.1.4-codedump/doc/manual/"
           data-tag=""
           data-author="" >
            <span class="post-title" title="Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/manual">Unity/ToLua/Lua æºç é˜…è¯»/Lua-5.1.4-codedump/doc/manual</span>
            <span class="post-date" title="2020-12-18 11:53:11">2020/12/18</span>
        </a>
        
    </nav>
</div>
    </div>
    <div class="hide-list">
        <div class="semicircle">
            <div class="brackets first"><</div>
            <div class="brackets">&gt;</div>
        </div>
    </div>
</aside>
<div class="post">
    <div class="pjax">
        <article id="post-Unity/ToLua/Lua æºç é˜…è¯»" class="article article-type-post" itemscope itemprop="blogPost">
    
        <h1 class="article-title">Lua æºç é˜…è¯»</h1>
    
    <div class="article-meta">
        
        <span class="top"><a>ç½®é¡¶</a></span>
        
        
        
        <span class="book">
            
                <a  data-rel="Unity">Unity</a>
            
        </span>
        
        
        <span class="tag">
            
            <a class="color1">ToLua</a>
            
        </span>
        
    </div>
    <div class="article-meta">
        
            Created At : <time class="date" title='æ›´æ–°æ—¶é—´: 2021-03-09 15:11:32'>2020-05-08 11:41</time>
        
    </div>
    <div class="article-meta">
        
        <span>å­—æ•°:9.6k</span>
        
        
        <span id="busuanzi_container_page_pv">
            Views ğŸ‘€ :<span id="busuanzi_value_page_pv">
                <span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </span>
        </span>
        
        
        <span class="top-comment" title="è·³è½¬è‡³è¯„è®ºåŒº">
            <a href="#comments">
                è¯„è®º:<span class="count-comment">
                    <span class="spinner">
                      <div class="cube1"></div>
                      <div class="cube2"></div>
                    </span>
                </span>
            </a>
        </span>
        
    </div>
    
    <div class="toc-ref">
    
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Lua-å‰æœŸçŸ¥è¯†"><span class="toc-text">Lua å‰æœŸçŸ¥è¯†</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Lua-é˜…è¯»ä¹¦ç±"><span class="toc-text">Lua é˜…è¯»ä¹¦ç±</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#å¼•ç”¨æ–‡ç« "><span class="toc-text">å¼•ç”¨æ–‡ç« </span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lua-åŠ è½½æ–‡ä»¶çš„æµç¨‹"><span class="toc-text">Lua åŠ è½½æ–‡ä»¶çš„æµç¨‹</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lua-ç¯å¢ƒ-Environment"><span class="toc-text">Lua ç¯å¢ƒ Environment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Lua-åŸºç¡€çŸ¥è¯†å­¦ä¹ "><span class="toc-text">Lua åŸºç¡€çŸ¥è¯†å­¦ä¹ </span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#å€¼ä¸ç±»å‹"><span class="toc-text">å€¼ä¸ç±»å‹</span></a></li></ol>
    
<style>
    .left-col .switch-btn,
    .left-col .switch-area {
        display: none;
    }
    .toc-level-3 i,
    .toc-level-3 ol {
        display: none !important;
    }
</style>
</div>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="Lua-å‰æœŸçŸ¥è¯†"><a href="#Lua-å‰æœŸçŸ¥è¯†" class="headerlink" title="Lua å‰æœŸçŸ¥è¯†"></a>Lua å‰æœŸçŸ¥è¯†</h1><h4 id="Lua-é˜…è¯»ä¹¦ç±"><a href="#Lua-é˜…è¯»ä¹¦ç±" class="headerlink" title="Lua é˜…è¯»ä¹¦ç±"></a>Lua é˜…è¯»ä¹¦ç±</h4><ul>
<li><ol>
<li>Lua ç¼–ç¨‹ &lt;&lt; Programming in Lua &gt;&gt; ,ç¼–å†™ Lua ä»£ç çš„åŸºæœ¬æ“ä½œ. åˆçº§</li>
</ol>
</li>
<li><ol start="2">
<li>&lt;&lt; Lua ç¨‹åºè®¾è®¡ç¬¬å››ç‰ˆ &gt;&gt; ä¸­çº§</li>
</ol>
</li>
<li><ol start="3">
<li><a href="https://www.bilibili.com/video/BV1Zz411i7QW?p=22" target="_blank" rel="noopener">https://www.bilibili.com/video/BV1Zz411i7QW?p=22</a>  Lua å®é™…åº”ç”¨ä¾‹å­/æ•™ç¨‹,çœ‹è¿™ä¸ªè·Ÿç€æ•²ä¸€éä¸Šé¢ 2 æœ¬ä¹¦ä¸çœ‹ä¹Ÿè¡Œ.</li>
</ol>
</li>
<li><ol start="4">
<li>&lt;&lt; Lua è®¾è®¡ä¸å®ç° &gt;&gt; é«˜çº§,Lua å®ç°çš„ç®—æ³•,è™šæ‹Ÿæœºè®²è§£,ç¼–è¯‘å™¨è®²è§£,GC ç­‰</li>
</ol>
</li>
</ul>
<h4 id="å¼•ç”¨æ–‡ç« "><a href="#å¼•ç”¨æ–‡ç« " class="headerlink" title="å¼•ç”¨æ–‡ç« "></a>å¼•ç”¨æ–‡ç« </h4><ul>
<li><ol>
<li><a href="https://www.lua.org/" target="_blank" rel="noopener">https://www.lua.org/</a></li>
</ol>
</li>
<li><ol start="2">
<li><a href="https://blog.csdn.net/yuanlin2008" target="_blank" rel="noopener">https://blog.csdn.net/yuanlin2008</a></li>
</ol>
</li>
<li><ol start="3">
<li><a href="https://blog.csdn.net/pyf09/category_9283453_2.html" target="_blank" rel="noopener">https://blog.csdn.net/pyf09/category_9283453_2.html</a></li>
</ol>
</li>
<li><ol start="4">
<li><a href="https://www.zhihu.com/topic/20134522/newest" target="_blank" rel="noopener">https://www.zhihu.com/topic/20134522/newest</a> &lt;&lt;Luaè®¾è®¡ä¸å®ç°&gt;&gt;</li>
</ol>
</li>
<li><ol start="5">
<li><a href="https://blog.csdn.net/yuanlin2008/category_1307277.html" target="_blank" rel="noopener">https://blog.csdn.net/yuanlin2008/category_1307277.html</a> ç¼–è¯‘å™¨ä¸è™šæ‹Ÿæœº</li>
</ol>
</li>
</ul>
<h4 id="Lua-åŠ è½½æ–‡ä»¶çš„æµç¨‹"><a href="#Lua-åŠ è½½æ–‡ä»¶çš„æµç¨‹" class="headerlink" title="Lua åŠ è½½æ–‡ä»¶çš„æµç¨‹"></a>Lua åŠ è½½æ–‡ä»¶çš„æµç¨‹</h4><ul>
<li><ol>
<li>ä½¿ç”¨ package.path(â€œpathâ€) æ–¹æ³•,å°†å¤šä¸ª Lua æ–‡ä»¶çš„è·¯å¾„æ”¾å…¥.</li>
</ol>
</li>
<li><ol start="2">
<li>ä½¿ç”¨ loadfile(â€œpathâ€) æ–¹æ³•,å°† Lua æ–‡ä»¶åŠ è½½è¿› lua çš„ä¸€ä¸ªè¡¨ä¸­.</li>
</ol>
</li>
<li><ol start="3">
<li>ä½¿ç”¨ require(â€œpathâ€) æ–¹æ³•,å°† Lua æ–‡ä»¶ä¸­çš„æ¨¡å—åŠ è½½è¿› lua_state è™šæ‹Ÿæ ˆ.å¦‚æœæ‰¾ä¸åˆ°,å°±å» package.cpath æœç´¢ç›¸åº”çš„ C åº“,å¦‚æœæ‰¾åˆ°äº†å°±ä½¿ç”¨ package.loadlib è¿›è¡ŒåŠ è½½,ä¸€èˆ¬æƒ…å†µæ˜¯åŠ è½½ä¸€å † C çš„æ–¹æ³•.</li>
</ol>
</li>
<li><ol start="4">
<li>å¦‚æœå·²ç»åŠ è½½æˆåŠŸ,åŠ è½½å‡½æ•°å¿…é¡»æœ‰è¿”å›å€¼,ä¸‹æ¬¡ä½¿ç”¨ require(â€œpathâ€) åˆ™ä¼šä» package.loaded ä¸­æŸ¥æ‰¾,å¹¶è¿”å›ä¸€ä¸ªå€¼( lua è„šæœ¬æ²¡æœ‰è¿”å›å€¼,åˆ™éœ€è¦è¿”å› true).</li>
</ol>
</li>
<li><ol start="5">
<li>å¦‚æœè¦é‡æ–°åŠ è½½ä¸€ä¸ªæ¨¡å—,åˆ™éœ€è¦å…ˆå°†æ¨¡å—ä» package.loaded ä¸­åˆ é™¤,ç„¶ååœ¨è°ƒç”¨ require   </li>
</ol>
</li>
</ul>
<h4 id="Lua-ç¯å¢ƒ-Environment"><a href="#Lua-ç¯å¢ƒ-Environment" class="headerlink" title="Lua ç¯å¢ƒ Environment"></a>Lua ç¯å¢ƒ Environment</h4><ul>
<li><ol>
<li>å…¨å±€ç¯å¢ƒ:global environment å°±æ˜¯ Lua ä¸­çš„ _G , _ENV;ä¸€ä¸ªlua_stateå°±æœ‰ä¸€ä¸ª _G</li>
</ol>
</li>
<li><ol start="2">
<li>è®¾ç½®ç¯å¢ƒå®æ“ <strong>TODO</strong></li>
</ol>
</li>
</ul>
<h4 id="Lua-åŸºç¡€çŸ¥è¯†å­¦ä¹ "><a href="#Lua-åŸºç¡€çŸ¥è¯†å­¦ä¹ " class="headerlink" title="Lua åŸºç¡€çŸ¥è¯†å­¦ä¹ "></a>Lua åŸºç¡€çŸ¥è¯†å­¦ä¹ </h4><ul>
<li><ol>
<li>ç½‘ç«™å­¦ä¹ <pre><code>å®˜ç½‘ https://www.lua.org/ 
è§†é¢‘1 https://www.bilibili.com/video/av39228822/ 
è§†é¢‘2 https://www.bilibili.com/video/BV1H4411b7o9
http://manistein.club/</code></pre></li>
</ol>
</li>
<li><ol start="2">
<li>Lua åŸç”Ÿçš„ C ä»£ç å·²æ›´æ–°è‡³ 5.4.1 ç‰ˆæœ¬;Luaæ˜¯åŠ¨æ€ç±»å‹çš„,é€šè¿‡ä½¿ç”¨åŸºäºå¯„å­˜å™¨çš„è™šæ‹Ÿæœºè§£é‡Šå­—èŠ‚ç æ¥è¿è¡Œï¼Œå¹¶ä¸”å…·æœ‰è‡ªåŠ¨å†…å­˜ç®¡ç†å’Œå¢é‡åƒåœ¾æ”¶é›†.</li>
</ol>
</li>
<li><ol start="3">
<li>å…ˆæŸ¥çœ‹ä¸€ä¸‹ Lua åŸç”ŸCä»£ç çš„æ–‡æ¡£,è‹±æ–‡æ–‡æ¡£:<a href="https://www.lua.org/manual/5.4/" target="_blank" rel="noopener">https://www.lua.org/manual/5.4/</a> ;      <a href="https://www.lua.org/manual/5.3/manual.html" target="_blank" rel="noopener">https://www.lua.org/manual/5.3/manual.html</a><br>ä¸­æ–‡æ–‡æ¡£,äº‘é£å¤§ç¥ç¿»è¯‘çš„,å°½é‡çœ‹è¿™ä¸ª,<a href="https://cloudwu.github.io/lua53doc/contents.html#contents" target="_blank" rel="noopener">https://cloudwu.github.io/lua53doc/contents.html#contents</a></li>
</ol>
</li>
<li><ol start="4">
<li>luajit ç›®å‰å¯¹æ ‡çš„æ˜¯ lua5.1ç‰ˆæœ¬,ä¸€ä¸‹ä»‹ç»çš„æºç æœ‰å¯èƒ½åœ¨ lua çš„ä¸åŒç‰ˆæœ¬é‡Œé¢</li>
</ol>
</li>
</ul>
<h1 id="å€¼ä¸ç±»å‹"><a href="#å€¼ä¸ç±»å‹" class="headerlink" title="å€¼ä¸ç±»å‹"></a>å€¼ä¸ç±»å‹</h1><ul>
<li><ol>
<li>number æ ‡å‡† Lua ä½¿ç”¨ 64 ä½,LuaJIT æ²¡æœ‰ 64 ä½,ä½†æ˜¯ toLua é‡Œé¢æœ‰ä¸ªint64 è¡¥è¶³äº†ç¼ºé™·.</li>
</ol>
</li>
<li><ol start="2">
<li>Userdata ,ä¸€ç§æ˜¯å®Œå…¨ç”¨æˆ·æ•°æ®/ full Userdata,ç”± Lua ç®¡ç†çš„å†…å­˜å¯¹åº”çš„å¯¹è±¡;è½»é‡ç”¨æˆ·æ•°æ®/light Userdata,æŒ‡ä¸€ä¸ªç®€å•çš„ C æŒ‡é’ˆ.åªæœ‰é€šè¿‡C APIï¼Œæ‰èƒ½åœ¨Luaä¸­åˆ›å»ºæˆ–ä¿®æ”¹Userdataå€¼;ç”¨æˆ·æ•°æ®ç”±å®¿ä¸»ç¨‹åº C/C++ æ§åˆ¶.ä½¿ç”¨è¿™ä¸ªç±»å‹æ˜¯ä¸ºäº†å…è®¸ä»»æ„Cæ•°æ®å­˜å‚¨åœ¨Luaå˜é‡ä¸­.</li>
</ol>
</li>
<li><ol start="3">
<li>thread ;Lua ä¸­çš„è¿™ä¸ªç±»å‹åªè¡¨ç¤ºåç¨‹.</li>
</ol>
</li>
<li><ol start="4">
<li>table æ˜¯ä¸€ä¸ªå…³è”æ•°ç»„, å…³è”æ•°ç»„ï¼ˆassociative array )æ˜¯ä¸€ç§å¸¸ç”¨çš„æŠ½è±¡æ•°æ®ç±»å‹ã€‚å®ƒæœ‰å¾ˆå¤šåˆ«åï¼Œä¾‹å¦‚associative container , map , mapping , dictionary , finite map , table,index ç­‰.å®ƒçš„ç‰¹ç‚¹æ˜¯ç”±ä¸€ä¸ªå…³é”®å­—å’Œå…¶ä»–å„ç§å±æ€§ç»„æˆçš„é›†åˆã€‚å…¸å‹çš„æ“ä½œåŒ…æ‹¬æ’å…¥ï¼Œåˆ é™¤å’ŒæŸ¥æ‰¾ç­‰ã€‚è€Œç”¨äºæè¿°å…³è”æ•°ç»„æœ€å¸¸ç”¨çš„æ˜¯å“ˆå¸Œè¡¨ ï¼ˆhash table ï¼‰å’Œè‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘ï¼ˆself-balanced binary search tree )(åŒ…æ‹¬çº¢é»‘æ ‘ ï¼ˆred-black tree ï¼‰å’Œavlæ ‘ ï¼ˆavl tree ï¼‰ï¼Œæœ‰æ—¶å¯èƒ½ä½¿ç”¨B-tree (é€‚ç”¨äºå…³è”æ•°ç»„å¤ªå¤§çš„æƒ…å†µï¼Œæ¯”å¦‚æ•°æ®åº“ç­‰ï¼‰ï¼‰ã€‚å“ˆå¸Œè¡¨å’Œè‡ªå¹³è¡¡äºŒå‰æœç´¢æ ‘çš„æ€§èƒ½å¯¹æ¯”å¦‚ä¸‹ï¼šå¹³å‡æƒ…å†µä¸‹å“ˆå¸Œè¡¨çš„æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œçš„å¤æ‚åº¦ä¸ºOï¼ˆ1ï¼‰ï¼Œè€Œè‡ªå¹³ è¡¡äºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œçš„å¤æ‚åº¦ä¸ºOï¼ˆlog(n))ã€‚è€Œæœ€åæƒ…å†µä¸‹å¹³è¡¡äºŒå‰æœç´¢æ ‘çš„æŸ¥æ‰¾å’Œæ’å…¥æ“ä½œçš„å¤æ‚åº¦ä»ä¸ºO(log(n))ï¼Œè€Œå“ˆå¸Œè¡¨çš„æŸ¥ æ‰¾å’Œæ’å…¥æ“ä½œçš„å¤æ‚åº¦å¯èƒ½è¾¾åˆ°Oï¼ˆnï¼‰;       tableç±»å‹æ˜¯ä¸€ä¸ª hash è¡¨,å¯ä»¥ç”¨å…¶ä»–ä»»ä½•ç±»å‹(é™¤äº† nil NaN)ä½œä¸º key å€¼(ç´¢å¼•)ä½¿ç”¨;è¡¨ä¸­ä¸èƒ½å­˜æ”¾ nil;</li>
</ol>
</li>
<li><ol start="5">
<li>å˜é‡å¹¶æ²¡æœ‰æŒæœ‰å„ä¸ªç±»å‹çš„å€¼,è€Œæ˜¯ä¿å­˜äº†å¯¹è¿™äº›ç±»å‹å¯¹è±¡çš„å¼•ç”¨,èµ‹å€¼,å‚æ•°ä¼ é€’,å‡½æ•°è¿”å›,éƒ½æ˜¯é’ˆå¯¹å¼•ç”¨è€Œä¸æ˜¯é’ˆå¯¹å€¼è¿›è¡Œçš„æ“ä½œ.</li>
</ol>
</li>
<li><ol start="6">
<li>å…¨å±€å˜é‡,åœ¨å®šä¹‰å˜é‡çš„æ—¶å€™,å‰é¢ä¸åŠ ä¸Š local å°±æ˜¯å…¨å±€å˜é‡;å…¨å±€å˜é‡ä¿å­˜çš„ä½ç½®åœ¨ä¸€ä¸ª table é‡Œé¢,è¿™ä¸ª table çš„åå­—æ˜¯ _G.<br>å¦‚æœæˆ‘ä»¬æƒ³é¿å…è¿™ç§æƒ…å†µå¯ä»¥ä½¿ç”¨setfenv,è¿™ä¸ªå‡½æ•°å¯ä»¥å°†å½“å‰å‡½æ•°/ä¸»å‡½æ•°ç­‰,é‡æ–°è®¾ç½®å‡½æ•°å†…çš„å…¨å±€å˜é‡çš„ä¿å­˜ä½ç½®,åŸæ¥æ˜¯å…¨éƒ¨ä¿å­˜åœ¨_G ä¸­çš„,ç°åœ¨ä½¿ç”¨setfenv(1, {})è¡¨ç¤ºå°†å½“å‰å‡½æ•°å†…çš„å…¨å±€å˜é‡ä¿å­˜åœ¨ä¸€ä¸ªç©ºè¡¨ä¸­,è€Œè¿™ä¸ªè¡¨æ˜¯ç©ºçš„,æ‰€ä»¥å†ä½¿ç”¨è¿™ä¸ªå‡½æ•°å†…çš„å…¨å±€å˜é‡å°±ä¼šæŠ¥é”™.    <a href="https://www.cnblogs.com/guangyun/p/4685353.html" target="_blank" rel="noopener">https://www.cnblogs.com/guangyun/p/4685353.html</a></li>
</ol>
</li>
<li><ol start="7">
<li><p>å…ƒè¡¨,getmetatable è·å–ä¸€ä¸ªå…ƒè¡¨,setmetatable è®¾ç½®ä¸€ä¸ªå…ƒè¡¨,å…ƒè¡¨ä¸­çš„å…ƒæ–¹æ³•å¯ä»¥æ˜¯:</p>
<pre><code>__add: + æ“ä½œ, å¦‚æœä»»ä½•ä¸æ˜¯æ•°å­—çš„å€¼ï¼ˆåŒ…æ‹¬ä¸èƒ½è½¬æ¢ä¸ºæ•°å­—çš„å­—ç¬¦ä¸²ï¼‰åšåŠ æ³•ï¼Œ Lua å°±ä¼šå°è¯•è°ƒç”¨å…ƒæ–¹æ³•ã€‚ é¦–å…ˆã€Lua æ£€æŸ¥ç¬¬ä¸€ä¸ªæ“ä½œæ•°ï¼ˆå³ä½¿å®ƒæ˜¯åˆæ³•çš„ï¼‰ï¼Œ å¦‚æœè¿™ä¸ªæ“ä½œæ•°æ²¡æœ‰ä¸º &quot;__add&quot; äº‹ä»¶å®šä¹‰å…ƒæ–¹æ³•ï¼Œ Lua å°±ä¼šæ¥ç€æ£€æŸ¥ç¬¬äºŒä¸ªæ“ä½œæ•°ã€‚ ä¸€æ—¦ Lua æ‰¾åˆ°äº†å…ƒæ–¹æ³•ï¼Œ å®ƒå°†æŠŠä¸¤ä¸ªæ“ä½œæ•°ä½œä¸ºå‚æ•°ä¼ å…¥å…ƒæ–¹æ³•ï¼Œ å…ƒæ–¹æ³•çš„ç»“æœï¼ˆè°ƒæ•´ä¸ºå•ä¸ªå€¼ï¼‰ä½œä¸ºè¿™ä¸ªæ“ä½œçš„ç»“æœã€‚ å¦‚æœæ‰¾ä¸åˆ°å…ƒæ–¹æ³•ï¼Œå°†æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚         
__sub: - æ“ä½œ,åŒä¸Š       
__mul: * æ“ä½œ,åŒä¸Š       
__div: / æ“ä½œ,åŒä¸Š       
__mod: % æ“ä½œ,åŒä¸Š       
__pow: ^ ï¼ˆæ¬¡æ–¹ï¼‰æ“ä½œ,åŒä¸Š       
__unm: - ï¼ˆå–è´Ÿï¼‰æ“ä½œ,åŒä¸Š       
__idiv: // ï¼ˆå‘ä¸‹å–æ•´é™¤æ³•ï¼‰æ“ä½œ,åŒä¸Š       
__concat: .. ï¼ˆè¿æ¥ï¼‰æ“ä½œã€‚ è¡Œä¸ºå’Œ &quot;add&quot; æ“ä½œç±»ä¼¼ï¼Œ ä¸åŒçš„æ˜¯ Lua åœ¨ä»»ä½•æ“ä½œæ•°å³ä¸æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸² ä¹Ÿä¸æ˜¯æ•°å­—ï¼ˆæ•°å­—æ€»èƒ½è½¬æ¢ä¸ºå¯¹åº”çš„å­—ç¬¦ä¸²ï¼‰çš„æƒ…å†µä¸‹å°è¯•å…ƒæ–¹æ³•ã€‚
__band: &amp; ï¼ˆæŒ‰ä½ä¸ï¼‰æ“ä½œã€‚ è¡Œä¸ºå’Œ &quot;add&quot; æ“ä½œç±»ä¼¼ï¼Œ ä¸åŒçš„æ˜¯ Lua ä¼šåœ¨ä»»ä½•ä¸€ä¸ªæ“ä½œæ•°æ— æ³•è½¬æ¢ä¸ºæ•´æ•°æ—¶å°è¯•å–å…ƒæ–¹æ³•ã€‚        
__bor: | ï¼ˆæŒ‰ä½æˆ–ï¼‰æ“ä½œ,åŒä¸Š       
__bxor: ~ ï¼ˆæŒ‰ä½å¼‚æˆ–ï¼‰æ“ä½œ,åŒä¸Š       
__bnot: ~ ï¼ˆæŒ‰ä½éï¼‰æ“ä½œ,åŒä¸Š       
__shl: &lt;&lt; ï¼ˆå·¦ç§»ï¼‰æ“ä½œ,åŒä¸Š       
__shr: &gt;&gt; ï¼ˆå³ç§»ï¼‰æ“ä½œ,åŒä¸Š       
__len: # ï¼ˆå–é•¿åº¦ï¼‰æ“ä½œã€‚ å¦‚æœå¯¹è±¡ä¸æ˜¯å­—ç¬¦ä¸²ï¼ŒLua ä¼šå°è¯•å®ƒçš„å…ƒæ–¹æ³•ã€‚ å¦‚æœæœ‰å…ƒæ–¹æ³•ï¼Œåˆ™è°ƒç”¨å®ƒå¹¶å°†å¯¹è±¡ä»¥å‚æ•°å½¢å¼ä¼ å…¥ï¼Œ è€Œè¿”å›å€¼ï¼ˆè¢«è°ƒæ•´ä¸ºå•ä¸ªï¼‰åˆ™ä½œä¸ºç»“æœã€‚ å¦‚æœå¯¹è±¡æ˜¯ä¸€å¼ è¡¨ä¸”æ²¡æœ‰å…ƒæ–¹æ³•ï¼Œ Lua ä½¿ç”¨è¡¨çš„å–é•¿åº¦æ“ä½œï¼ˆå‚è§ Â§3.4.7ï¼‰ã€‚ å…¶å®ƒæƒ…å†µï¼Œå‡æŠ›å‡ºé”™è¯¯ã€‚
__eq: == ï¼ˆç­‰äºï¼‰æ“ä½œã€‚ å’Œ &quot;add&quot; æ“ä½œè¡Œä¸ºç±»ä¼¼ï¼Œ ä¸åŒçš„æ˜¯ Lua ä»…åœ¨ä¸¤ä¸ªå€¼éƒ½æ˜¯è¡¨æˆ–éƒ½æ˜¯å®Œå…¨ç”¨æˆ·æ•°æ® ä¸”å®ƒä»¬ä¸æ˜¯åŒä¸€ä¸ªå¯¹è±¡æ—¶æ‰å°è¯•å…ƒæ–¹æ³•ã€‚ è°ƒç”¨çš„ç»“æœæ€»ä¼šè¢«è½¬æ¢ä¸ºå¸ƒå°”é‡ã€‚
__lt: &lt; ï¼ˆå°äºï¼‰æ“ä½œã€‚ å’Œ &quot;add&quot; æ“ä½œè¡Œä¸ºç±»ä¼¼ï¼Œ ä¸åŒçš„æ˜¯ Lua ä»…åœ¨ä¸¤ä¸ªå€¼ä¸å…¨ä¸ºæ•´æ•°ä¹Ÿä¸å…¨ä¸ºå­—ç¬¦ä¸²æ—¶æ‰å°è¯•å…ƒæ–¹æ³•ã€‚ è°ƒç”¨çš„ç»“æœæ€»ä¼šè¢«è½¬æ¢ä¸ºå¸ƒå°”é‡ã€‚
__le: &lt;= ï¼ˆå°äºç­‰äºï¼‰æ“ä½œã€‚ å’Œå…¶å®ƒæ“ä½œä¸åŒï¼Œ å°äºç­‰äºæ“ä½œå¯èƒ½ç”¨åˆ°ä¸¤ä¸ªä¸åŒçš„äº‹ä»¶ã€‚ é¦–å…ˆï¼Œåƒ &quot;lt&quot; æ“ä½œçš„è¡Œä¸ºé‚£æ ·ï¼ŒLua åœ¨ä¸¤ä¸ªæ“ä½œæ•°ä¸­æŸ¥æ‰¾ &quot;__le&quot; å…ƒæ–¹æ³•ã€‚ å¦‚æœä¸€ä¸ªå…ƒæ–¹æ³•éƒ½æ‰¾ä¸åˆ°ï¼Œå°±ä¼šå†æ¬¡æŸ¥æ‰¾ &quot;__lt&quot; äº‹ä»¶ï¼Œ å®ƒä¼šå‡è®¾ a &lt;= b ç­‰ä»·äº not (b &lt; a)ã€‚ è€Œå…¶å®ƒæ¯”è¾ƒæ“ä½œç¬¦ç±»ä¼¼ï¼Œå…¶ç»“æœä¼šè¢«è½¬æ¢ä¸ºå¸ƒå°”é‡ã€‚
__index: ç´¢å¼• table[key]ã€‚ å½“ table ä¸æ˜¯è¡¨æˆ–æ˜¯è¡¨ table ä¸­ä¸å­˜åœ¨ key è¿™ä¸ªé”®æ—¶ï¼Œè¿™ä¸ªäº‹ä»¶è¢«è§¦å‘ã€‚ æ­¤æ—¶ï¼Œä¼šè¯»å‡º table ç›¸åº”çš„å…ƒæ–¹æ³•ã€‚
å°½ç®¡åå­—å–æˆè¿™æ ·ï¼Œ è¿™ä¸ªäº‹ä»¶çš„å…ƒæ–¹æ³•å…¶å®å¯ä»¥æ˜¯ä¸€ä¸ªå‡½æ•°ä¹Ÿå¯ä»¥æ˜¯ä¸€å¼ è¡¨ã€‚ å¦‚æœå®ƒæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œåˆ™ä»¥ table å’Œ key ä½œä¸ºå‚æ•°è°ƒç”¨å®ƒã€‚ å¦‚æœå®ƒæ˜¯ä¸€å¼ è¡¨ï¼Œæœ€ç»ˆçš„ç»“æœå°±æ˜¯ä»¥ key å–ç´¢å¼•è¿™å¼ è¡¨çš„ç»“æœã€‚ ï¼ˆè¿™ä¸ªç´¢å¼•è¿‡ç¨‹æ˜¯èµ°å¸¸è§„çš„æµç¨‹ï¼Œè€Œä¸æ˜¯ç›´æ¥ç´¢å¼•ï¼Œ æ‰€ä»¥è¿™æ¬¡ç´¢å¼•æœ‰å¯èƒ½å¼•å‘å¦ä¸€æ¬¡å…ƒæ–¹æ³•ã€‚ï¼‰

__newindex: ç´¢å¼•èµ‹å€¼ table[key] = value ã€‚ å’Œç´¢å¼•äº‹ä»¶ç±»ä¼¼ï¼Œå®ƒå‘ç”Ÿåœ¨ table ä¸æ˜¯è¡¨æˆ–æ˜¯è¡¨ table ä¸­ä¸å­˜åœ¨ key è¿™ä¸ªé”®çš„æ—¶å€™ã€‚ æ­¤æ—¶ï¼Œä¼šè¯»å‡º table ç›¸åº”çš„å…ƒæ–¹æ³•ã€‚
åŒç´¢å¼•è¿‡ç¨‹é‚£æ ·ï¼Œ è¿™ä¸ªäº‹ä»¶çš„å…ƒæ–¹æ³•å³å¯ä»¥æ˜¯å‡½æ•°ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€å¼ è¡¨ã€‚ å¦‚æœæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œ åˆ™ä»¥ tableã€ keyã€ä»¥åŠ value ä¸ºå‚æ•°ä¼ å…¥ã€‚ å¦‚æœæ˜¯ä¸€å¼ è¡¨ï¼Œ Lua å¯¹è¿™å¼ è¡¨åšç´¢å¼•èµ‹å€¼æ“ä½œã€‚ ï¼ˆè¿™ä¸ªç´¢å¼•è¿‡ç¨‹æ˜¯èµ°å¸¸è§„çš„æµç¨‹ï¼Œè€Œä¸æ˜¯ç›´æ¥ç´¢å¼•èµ‹å€¼ï¼Œ æ‰€ä»¥è¿™æ¬¡ç´¢å¼•èµ‹å€¼æœ‰å¯èƒ½å¼•å‘å¦ä¸€æ¬¡å…ƒæ–¹æ³•ã€‚ï¼‰

ä¸€æ—¦æœ‰äº† &quot;newindex&quot; å…ƒæ–¹æ³•ï¼Œ Lua å°±ä¸å†åšæœ€åˆçš„èµ‹å€¼æ“ä½œã€‚ ï¼ˆå¦‚æœæœ‰å¿…è¦ï¼Œåœ¨å…ƒæ–¹æ³•å†…éƒ¨å¯ä»¥è°ƒç”¨ rawset æ¥åšèµ‹å€¼ã€‚ï¼‰

__call: å‡½æ•°è°ƒç”¨æ“ä½œ func(args)ã€‚ å½“ Lua å°è¯•è°ƒç”¨ä¸€ä¸ªéå‡½æ•°çš„å€¼çš„æ—¶å€™ä¼šè§¦å‘è¿™ä¸ªäº‹ä»¶ ï¼ˆå³ func ä¸æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰ã€‚ æŸ¥æ‰¾ func çš„å…ƒæ–¹æ³•ï¼Œ å¦‚æœæ‰¾å¾—åˆ°ï¼Œå°±è°ƒç”¨è¿™ä¸ªå…ƒæ–¹æ³•ï¼Œ func ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥ï¼ŒåŸæ¥è°ƒç”¨çš„å‚æ•°ï¼ˆargsï¼‰åä¾æ¬¡æ’åœ¨åé¢ã€‚</code></pre></li>
</ol>
</li>
<li><ol start="8">
<li>Garbage Collection åƒåœ¾æ”¶é›†;Luaä¸­çš„åƒåœ¾æ”¶é›†å™¨(GC)æœ‰ä¸¤ç§å·¥ä½œæ¨¡å¼:å¢é‡å¼å’Œåˆ†ä»£å¼ã€‚<br>Lua å®ç°äº†ä¸€ä¸ªå¢é‡æ ‡è®°-æ‰«ææ”¶é›†å™¨ã€‚ å®ƒä½¿ç”¨è¿™ä¸¤ä¸ªæ•°å­—æ¥æ§åˆ¶åƒåœ¾æ”¶é›†å¾ªç¯ï¼š åƒåœ¾æ”¶é›†å™¨é—´æ­‡ç‡/garbage-collector pause å’Œ åƒåœ¾æ”¶é›†å™¨æ­¥è¿›å€ç‡/garbage-collector step multiplier. è¿™ä¸¤ä¸ªæ•°å­—éƒ½ä½¿ç”¨ç™¾åˆ†æ•°ä¸ºå•ä½ ï¼ˆä¾‹å¦‚ï¼šå€¼ 100 åœ¨å†…éƒ¨è¡¨ç¤º 1 ï¼‰;å¯ä»¥é€šè¿‡ lua_gc æˆ–collectgarbage æ§åˆ¶ä¸æ”¶é›† Lua çš„å¯¹è±¡;<strong>gcå¯ä»¥ä½œä¸ºå…ƒè¡¨ä¸­çš„å…ƒæ–¹æ³•,åœ¨åƒåœ¾æ”¶é›†çš„æ—¶å€™è¿›è¡Œè§¦å‘,è®¾ç½®è‡ªå·±çš„èµ„æºç®¡ç†å·¥ä½œ;å½“ä¸€ä¸ªè¢«æ ‡è®°çš„å¯¹è±¡æˆä¸ºåƒåœ¾å,GC ä¸ä¼šç«‹åˆ»å›æ”¶å®ƒ,ä¼šå°†å…¶æ”¾å…¥é“¾è¡¨,æ”¶é›†å®Œæˆä¹‹å,ä¼šæ£€æŸ¥é“¾è¡¨ä¸­çš„æ¯ä¸ªå¯¹è±¡çš„</strong>gc æ–¹æ³•;GC ä¼šå›æ”¶å¼±å¼•ç”¨çš„å¯¹è±¡, __mode åŸŸæ˜¯ä¸€ä¸ªåŒ…å«å­—ç¬¦ â€˜kâ€™ çš„å­—ç¬¦ä¸²æ—¶ï¼Œè¿™å¼ è¡¨çš„æ‰€æœ‰é”®çš†ä¸ºå¼±å¼•ç”¨ã€‚ å½“ __mode åŸŸæ˜¯ä¸€ä¸ªåŒ…å«å­—ç¬¦ â€˜vâ€™ çš„å­—ç¬¦ä¸²æ—¶ï¼Œè¿™å¼ è¡¨çš„æ‰€æœ‰å€¼çš†ä¸ºå¼±å¼•ç”¨;è°ƒç”¨               </li>
</ol>
</li>
<li><ol start="9">
<li><p>Lua ä½¿ç”¨ä¸€ä¸ª è™šæ‹Ÿæ ˆ æ¥å’Œ C äº’ä¼ å€¼ã€‚æ ˆä¸Šçš„çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ä¸€ä¸ª Lua å€¼ ï¼ˆnilï¼Œæ•°å­—ï¼Œå­—ç¬¦ä¸²ï¼Œç­‰ç­‰ï¼‰ã€‚æ— è®ºä½•æ—¶ Lua è°ƒç”¨ Cï¼Œè¢«è°ƒç”¨çš„å‡½æ•°éƒ½å¾—åˆ°ä¸€ä¸ªæ–°çš„æ ˆï¼Œ è¿™ä¸ªæ ˆç‹¬ç«‹äº C å‡½æ•°æœ¬èº«çš„æ ˆï¼Œä¹Ÿç‹¬ç«‹äºä¹‹å‰çš„ Lua æ ˆã€‚ å®ƒé‡Œé¢åŒ…å«äº† Lua ä¼ é€’ç»™ C å‡½æ•°çš„æ‰€æœ‰å‚æ•°ï¼Œ è€Œ C å‡½æ•°åˆ™æŠŠè¦è¿”å›çš„ç»“æœæ”¾å…¥è¿™ä¸ªæ ˆä»¥è¿”å›ç»™è°ƒç”¨è€…,ä¹Ÿå°±æ˜¯äº¤äº’æ ˆ.<br>ä¸ºäº†æ­£ç¡®çš„å’Œ Lua é€šè®¯ï¼Œ C å‡½æ•°å¿…é¡»ä½¿ç”¨ä¸‹åˆ—åè®®ã€‚</p>
<pre><code>C å‡½æ•°æ¨¡å‹      typedef int (*lua_CFunction) (lua_State *L);  è¿™ä¸ªåè®®å®šä¹‰äº† C çš„å‚æ•°ä»¥åŠè¿”å›å€¼ä¼ é€’æ–¹æ³•: C å‡½æ•°é€šè¿‡ Lua ä¸­çš„æ ˆæ¥æ¥å—å‚æ•°ï¼Œ å‚æ•°ä»¥æ­£åºå…¥æ ˆï¼ˆç¬¬ä¸€ä¸ªå‚æ•°é¦–å…ˆå…¥æ ˆï¼‰.

å½“å‡½æ•°å¼€å§‹çš„æ—¶å€™,lua_gettop(L) å¯ä»¥è¿”å›å‡½æ•°æ”¶åˆ°çš„å‚æ•°ä¸ªæ•°ã€‚ 
ç¬¬ä¸€ä¸ªå‚æ•°ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰åœ¨ç´¢å¼• 1 çš„åœ°æ–¹,è€Œæœ€åä¸€ä¸ªå‚æ•°åœ¨ç´¢å¼• lua_gettop(L) å¤„ã€‚ 
å½“éœ€è¦å‘ Lua è¿”å›å€¼çš„æ—¶å€™,C å‡½æ•°åªéœ€è¦æŠŠå®ƒä»¬ä»¥æ­£åºå‹åˆ°å †æ ˆä¸Šï¼ˆç¬¬ä¸€ä¸ªè¿”å›å€¼æœ€å…ˆå‹å…¥ï¼‰,ç„¶åè¿”å›è¿™äº›è¿”å›å€¼çš„ä¸ªæ•°.
åœ¨è¿™äº›è¿”å›å€¼ä¹‹ä¸‹çš„,å †æ ˆä¸Šçš„ä¸œè¥¿éƒ½ä¼šè¢« Lua ä¸¢æ‰. å’Œ Lua å‡½æ•°ä¸€æ ·,ä» Lua ä¸­è°ƒç”¨ C å‡½æ•°ä¹Ÿå¯ä»¥æœ‰å¾ˆå¤šè¿”å›å€¼.

å®é™…ä¾‹å­:
static int foo (lua_State *L) {
  int n = lua_gettop(L);    /* å‚æ•°çš„ä¸ªæ•° */
  lua_Number sum = 0.0;
  int i;
  for (i = 1; i &lt;= n; i++) {
    if (!lua_isnumber(L, i)) {
      lua_pushliteral(L, &quot;incorrect argument&quot;);
      lua_error(L);
    }
    sum += lua_tonumber(L, i);
  }
  lua_pushnumber(L, sum/n);        /* ç¬¬ä¸€ä¸ªè¿”å›å€¼ */
  lua_pushnumber(L, sum);         /* ç¬¬äºŒä¸ªè¿”å›å€¼ */
  return 2;                   /* è¿”å›å€¼çš„ä¸ªæ•° */
}
</code></pre></li>
</ol>
</li>
</ul>
<pre><code>
* 10. Lua çš„åº“,åˆ†ä¸ºåœ¨ Lua è„šæœ¬é‡Œé¢ä½¿ç”¨çš„æ ‡å‡†åº“,ä»¥åŠåœ¨ C ä¸­ä¸º Lua ç¼–ç¨‹çš„è¾…åŠ©åº“.å¯ä»¥ç§°ä¹‹ä¸ºé«˜çº§ API.
æ ‡å‡†åº“æ˜¯ä¸“é—¨ä¸º Lua ç¨‹åºå‘˜è€Œç¼–å†™çš„,ä¸ºäº†æé«˜æ•ˆç‡.</code></pre><pre><code>æ ‡å‡†åº“åŒ…æ‹¬:
    basic library åŸºç¡€åº“(assert,collectgarbage,dofile,error,_G,getmetatable,ipairs,load,loadfile,next,pairs,pcall,print...)       
    coroutine library åç¨‹åº“        
    package library åŒ…ç®¡ç†åº“        
    string manipulation å­—ç¬¦ä¸²æ§åˆ¶      
    basic UTF-8 support åŸºç¡€ UTF-8 æ”¯æŒ     
    table manipulation è¡¨æ§åˆ¶      
    mathematical functionsæ•°å­¦å‡½æ•°        
    input and output è¾“å…¥è¾“å‡º        
    operating system facilities æ“ä½œç³»å·¥å…·
    debug facilities è°ƒè¯•å·¥å…·</code></pre><pre><code>
#### table
* 1. table æŸ¥æ‰¾å…ƒè¡¨çš„æ–¹æ³•;ç¬¬ä¸€æ­¥ table å…ˆæ‰¾è‡ªèº«æ˜¯å¦æœ‰ Key,å¦‚æœè‡ªèº«æœ‰ Key åˆ™è¿”å› Key å¯¹åº”çš„å€¼;ç¬¬äºŒæ­¥,å¦‚æœæ²¡æœ‰è¿™ä¸ª key,åˆ™æŸ¥æ‰¾ metatable,å¦‚æœæ²¡æœ‰åˆ™è¿”å› nil;ç¬¬ä¸‰æ­¥,å¦‚æœæœ‰è¿™ä¸ª metatable åˆ™æŸ¥æ‰¾è¿™ä¸ª metatable çš„__index å¯¹åº”çš„ table æˆ–è€…æ–¹æ³•; **æ³¨æ„:ä¸æ˜¯æŸ¥æ‰¾ metatable è‡ªèº«çš„ key,è€Œæ˜¯ metatable.__index å¯¹åº”çš„ table æˆ–è€…æ–¹æ³•.** 
* 2. å¼±å¼•ç”¨è¡¨ weak table ; {__mode = &quot;kv&quot;},åœ¨è°ƒç”¨collectgarbage(&quot;collect&quot;)å¼ºåˆ¶ GC ä¸€æ¬¡ä¹‹å,è¿™ä¸ªè¡¨ä¸­çš„æ•°æ®æ²¡æœ‰å¼•ç”¨çš„è¯,å°±ä¼šè¢«æ¸…é™¤
* 3. table åˆ›å»ºå¯¹è±¡çš„æ–¹å¼æœ‰ 2 ç§,ä¸€ç§æ˜¯ä½¿ç”¨__index æŒ‡å‘çˆ¶ç±»;å¦ä¸€ç§å°±æ˜¯å°†çˆ¶ç±»æ‰€æœ‰çš„å‚æ•°å€¼,èµ‹å€¼ç»™å­ç±»,ç„¶åè®©å­ç±»çš„__index æŒ‡å‘è‡ªèº«

# Lua æºç é˜…è¯»
## Lua æ ¸å¿ƒä»£ç æ–‡ä»¶åˆ—è¡¨

#### è™šæ‹Ÿæœºæ ¸å¿ƒç›¸å…³æ–‡ä»¶åˆ—è¡¨

|æ–‡ä»¶åå­—|ä½œç”¨|å¯¹å¤–æ¥å£å‰ç¼€|
|---|---|---|
|lopcodes.c|Luaè™šæ‹Ÿæœºçš„æ“ä½œç /å­—èŠ‚ç ,æ¨¡æ‹Ÿæ±‡ç¼–è¯­è¨€,æ‰€æœ‰ Lua æºç éƒ½å¯ä»¥è½¬æˆç›¸åº”çš„æ“ä½œç |luaP_opmodes|
|lcode.c|æºç ç”Ÿæˆå™¨|luaK_|
|llex.c|è¯æ³•åˆ†æ|luaX_|
|lparser.c| è¯­æ³•åˆ†æå™¨|luaY_|
|lapi.c|Cè¯­è¨€æ¥å£,ä¸»è¦æ˜¯å¯¹ lua_state å½“å‰æ ˆè¿›è¡Œå¢åˆ æ”¹æŸ¥|lua_|
|ldebug.c|è°ƒè¯•åº“,åå°„,é’©å­|luaG_|
|ldo.c|å‡½æ•°è°ƒç”¨ä»¥åŠæ ˆç®¡ç†,lua çš„å †æ ˆä»¥åŠè°ƒç”¨ç»“æ„|luaD_|
|ldump.c|ä¿å­˜é¢„ç¼–è¯‘çš„Luaå—,å°†Luaæºç åºåˆ—åŒ–é¢„ç¼–è¯‘çš„ Lua å­—èŠ‚ç |luaU_|
|lfunc.c|è¾…åŠ©å‡½æ•°æ¥æ“ä½œåŸå‹å’Œé—­åŒ…|luaF_|
|lgc.c|GC|luaC_|
|lmem.c|å†…å­˜ç®¡ç†|luaM_|
|lobject.c|å¯¹è±¡ç®¡ç†|luaO_|
|lopcodes.c|å­—èŠ‚ç æ“ä½œ|luaP_|
|lstate.c|å…¨å±€çŠ¶æ€æœº,è™šæ‹Ÿæœºå †æ ˆ|luaE_|
|lstring.c| å­—ç¬¦ä¸²æ“ä½œ|luaS_|
|ltable.c| å­—ç¬¦ä¸²æ“ä½œ|luaH_|
|lundump.c|  åŠ è½½é¢„ç¼–è¯‘å­—èŠ‚ç |luaU_|
|ltm.c|  tag æ–¹æ³•|luaT_|
|lzio.c|ç¼“å­˜æµæ¥å£|luaZ_|

#### å†…åµŒåº“ç›¸å…³æ–‡ä»¶åˆ—è¡¨

|æ–‡ä»¶åå­—|ä½œç”¨|å¯¹å¤–æ¥å£å‰ç¼€|
|---|---|---|
|lauxlib.c|åº“ç¼–å†™æ—¶éœ€è¦ç”¨åˆ°çš„è¾…åŠ©å‡½æ•°åº“,é’ˆå¯¹è™šæ‹Ÿæœºå †æ ˆçš„æ“ä½œ,ä¸ lua_state å¯†åˆ‡ç›¸å…³|luaL_|
|lbaselib.c|åŸºç¡€åº“,Luaç³»ç»Ÿçš„åŸºç¡€ API|luaB_|
|ldblib.c|è°ƒè¯•åº“|db_|
|liolib.c|IOåº“|io_|
|lmathlib.c| æ•°å­¦åº“|math_|
|loslib.c| os åº“|os_|
|ltablib.c| è¡¨æ“ä½œåº“|luaH_|
|lstrlib.c|  å­—ç¬¦ä¸²æ“ä½œåº“|str_|
|loadlib.c|  åŠ è½½å™¨,åŠ è½½ lua æºç ,åŠ è½½ C åº“ .so|ll_|
|linit.c| è´Ÿè´£å†…åµŒåº“çš„åˆå§‹åŒ–|luaL_|

#### è§£é‡Šå™¨/ç¼–è¯‘å™¨/è™šæ‹Ÿæœº

|æ–‡ä»¶åå­—|ä½œç”¨|
|---|---|
|lua.c| è§£é‡Šå™¨|
|luac.c| å­—èŠ‚ç ç¼–è¯‘å™¨|
|lvm.c| luaV_ , Luaçš„è™šæ‹Ÿæœº|


## Lua è™šæ‹Ÿæœºæ¦‚å¿µ 

* 1. å¯ä»¥å°†è™šæ‹Ÿæœºç®€å•ç†è§£ä¸ºåœ¨å¹³å°æœºå™¨çš„å†…å­˜ä¸ç®—æ³•çš„å¸®åŠ©ä¸‹,å®ç°äº†ä¸€å¥—CPUè¿è¡Œæ–¹å¼çš„ç®€å•æ¨¡ä»¿,å½“è¿™ä¸ªè™šæ‹Ÿæœºå®ä¾‹æ”¯æŒçš„ CPU æŒ‡ä»¤è¶Šæ¥è¶Šå¤š,å°±è¶Šæ¥è¶Šåƒ,ä¹Ÿå°±æ˜¯è®¡ç®—æœºæŒ‡ä»¤çš„äºŒæ¬¡å®ç°.è™šæ‹Ÿæœºçš„å®ç°æ–¹å¼,ä¸€ç§æ˜¯åŸºäºå †æ ˆçš„ VM,å¦ä¸€ç§æ˜¯åŸºäºå¯„å­˜å™¨çš„ VM.å¯¹äºå¤§å¤šæ•°çš„è™šæ‹Ÿæœº,æ¯”å¦‚ JVM,Python,éƒ½é‡‡ç”¨çš„æ˜¯åŸºäºå †æ ˆçš„è™šæ‹Ÿæœº.åŸºäºå †æ ˆè™šæ‹Ÿæœº,å †æ ˆå¯èƒ½æŒ‡çš„å†…å­˜,ä¸æ˜¯æŒ‡çš„ç®—æ³•,ä¸€èˆ¬æ˜¯ä¸€ä¸ªæ ˆå®¹å™¨å»è·å–ä¸è®°å½•æ‰€æœ‰çš„æŒ‡ä»¤æ“ä½œçš„,ä¹Ÿå°±æ˜¯æŒ‡ä»¤çš„åŠ å‡ä¹˜é™¤ç­‰éƒ½ä¼šåœ¨è¿™ä¸ªæ ˆå®¹å™¨ä¸­ä½“ç°.è¿™ä¸ªæ ˆå®¹å™¨éƒ½æ˜¯åœ¨è¿è¡ŒæœŸé—´åˆ›å»ºå‡ºæ¥çš„,ä¹Ÿå°±æ˜¯æ ˆé‡Œé¢å­˜å‚¨çš„æ•°æ®åœ°å€ä½ç½®éƒ½æ˜¯åŠ¨æ€çš„,æ ˆå®¹å™¨ä¹Ÿæœ‰å¯èƒ½è¢«é”€æ¯.ä¹Ÿæ˜¯ç”±äºè¿™æ ·çš„åŸå› ,ç›¸æ¯”å¯„å­˜å™¨è™šæ‹Ÿæœº ä¼šå ç”¨æ›´å¤šçš„å†…å­˜ä¸å¢åŠ æŒ‡ä»¤çš„æ‰§è¡Œæ¬¡æ•°.

* 2. è™šæ‹ŸæœºåŸºäºæ ˆä¸åŸºäºå¯„å­˜å™¨çš„åŒºåˆ«: Lua é‡‡ç”¨çš„åŸºäºå¯„å­˜å™¨çš„è™šæ‹Ÿæœº,ä¹Ÿå°±æ˜¯å°†æŒ‡ä»¤çš„è¿ç®—æ–¹å¼ç›´æ¥ä»å†…å­˜ä¸­æ”¾è¿›äº†å¯„å­˜å™¨ä¸­.å‡å°‘äº†æŒ‡ä»¤çš„è¿è¡Œæ¬¡æ•°,å‡å°‘äº†å†…å­˜å¤åˆ¶çš„æ“ä½œ.æ‰€ä»¥ä¸ºä»€ä¹ˆ Lua ç›¸æ¯”å…¶ä»–è§£é‡Šè¯­è¨€ä¼šæ›´å¿«çš„åŸå› .ä½†æ˜¯å…¶å¢åŠ äº†å®ç°çš„å¤æ‚åº¦,æ¯æ¡æŒ‡ä»¤å ç”¨çš„å­˜å‚¨ç©ºé—´ä¹Ÿå¢åŠ äº†;Lua çš„å¯„å­˜å™¨VM ä¸æ˜¯ CPU çš„å¯„å­˜å™¨,è€Œæ˜¯ä¸€ç§æ¨¡ä»¿ CPU è¿è¡Œå¯„å­˜å™¨çš„æ–¹å¼,ä¸æ˜¯çœŸçš„æ”¾åœ¨ CPU ä¸­çš„å¯„å­˜å™¨è¿è¡Œ,ç±»ä¼¼äºæŠŠä¸€ä¸ªéå¸¸å°çš„å†…å­˜ç©ºé—´å½“æˆä¸€ä¸ªå¯„å­˜å™¨å—æ¥ç”¨,ç”¨å®Œå°±æ‰”çš„ç±»å‹,è€Œå…¶ä»–è¯­è¨€æ˜¯å°†ä¸€å¤§å—å †ä¸Šçš„å†…å­˜å½“æˆè™šæ‹Ÿæœºå †æ ˆä½¿ç”¨;(ç†è§£é”™è¯¯è¯·æŒ‡å‡º,è¿™ä¸€ç‚¹æ˜¯æ¨æ–­,ç¼–è¯‘åŸç†æ²¡å­¦,æ“ä½œç³»ç»Ÿæ°´å¹³ä¹Ÿä¸å¤Ÿ);   åŸºäºå¯„å­˜å™¨çš„è™šæ‹Ÿæœºï¼Œå®ƒä»¬çš„æ“ä½œæ•°æ˜¯å­˜æ”¾åœ¨CPUçš„å¯„å­˜å™¨çš„ã€‚æ²¡æœ‰å…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œå’Œæ¦‚å¿µã€‚ä½†æ˜¯æ‰§è¡Œçš„æŒ‡ä»¤å°±éœ€è¦åŒ…å«æ“ä½œæ•°çš„åœ°å€äº†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼ŒæŒ‡ä»¤å¿…é¡»æ˜ç¡®çš„åŒ…å«æ“ä½œæ•°çš„åœ°å€ï¼Œè¿™ä¸åƒæ ˆå¯ä»¥ç”¨æ ˆæŒ‡é’ˆå»æ“ä½œã€‚æ­£å¦‚å‰é¢æ‰€è¯´ï¼ŒåŸºäºå¯„å­˜å™¨çš„VMæ²¡æœ‰å…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œã€‚æ‰€ä»¥åŠ æ³•æŒ‡ä»¤åªéœ€è¦ä¸€è¡Œå°±å¤Ÿäº†ï¼Œä½†æ˜¯ä¸åƒStack-Basedä¸€æ ·ï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®çš„åˆ¶å®šæ“ä½œæ•°R1ã€R2ã€R3ï¼ˆè¿™äº›éƒ½æ˜¯å¯„å­˜å™¨ï¼‰çš„åœ°å€ã€‚è¿™ç§è®¾è®¡çš„æœ‰ç‚¹å°±æ˜¯å»æ‰äº†å…¥æ ˆå’Œå‡ºæ ˆçš„æ“ä½œï¼Œå¹¶ä¸”æŒ‡ä»¤åœ¨å¯„å­˜å™¨è™šæ‹Ÿæœºæ‰§è¡Œå¾—æ›´å¿«;åŸºäºå¯„å­˜å™¨å¾—è™šæ‹Ÿæœºè¿˜æœ‰ä¸€ä¸ªä¼˜ç‚¹å°±æ˜¯ä¸€äº›åœ¨åŸºäºStackçš„è™šæ‹Ÿæœºä¸­æ— æ³•å®ç°çš„ä¼˜åŒ–ï¼Œæ¯”å¦‚ï¼Œåœ¨ä»£ç ä¸­æœ‰ä¸€äº›ç›¸åŒçš„å‡æ³•è¡¨è¾¾å¼ï¼Œé‚£ä¹ˆå¯„å­˜å™¨åªéœ€è¦è®¡ç®—ä¸€æ¬¡ï¼Œç„¶åå°†ç»“æœä¿å­˜ï¼Œå¦‚æœä¹‹åè¿˜æœ‰è¿™ç§è¡¨è¾¾å¼éœ€è¦è®¡ç®—å°±ç›´æ¥è¿”å›ç»“æœã€‚è¿™æ ·å°±å‡å°‘äº†é‡å¤è®¡ç®—æ‰€é€ æˆçš„å¼€é”€;å½“ç„¶ï¼Œå¯„å­˜å™¨è™šæ‹Ÿæœºä¹Ÿæœ‰ä¸€äº›é—®é¢˜ï¼Œæ¯”å¦‚è™šæ‹Ÿæœºçš„æŒ‡ä»¤æ¯”Stack vmæŒ‡ä»¤è¦é•¿ï¼ˆå› ä¸ºRegisteræŒ‡ä»¤åŒ…å«äº†æ“ä½œæ•°åœ°å€);



* 3. Lua æ¨¡æ‹ŸæŒ‡ä»¤çš„ä»£ç åœ¨lopcodes.hä¸­.Lua è®¾å®šäº†æŒ‡ä»¤çš„ç±»å‹int,é•¿åº¦,æ ¼å¼ç­‰.Lua5.4 è®¾è®¡äº†83 ç§æŒ‡ä»¤.å®šä¹‰äº†ä¸€ç³»åˆ—å®å‡½æ•°å»æ“ä½œæŒ‡ä»¤.åˆ†ä¸º 5 ç±»æŒ‡ä»¤, iABC,iABx,iAsBx,iAx,x;æˆ‘ä»¬ä½¿ç”¨ luac æ¥æ˜¾ç¤ºåˆ†æ lua ä»£ç æ‰€ç”Ÿæˆçš„æŒ‡ä»¤,ä½¿ç”¨æ–¹å¼ä¸º luac -l -l test.lua,å…¶ç”Ÿæˆçš„æŒ‡ä»¤å¯ä»¥åœ¨lopcodes.c ä¸­æ‰¾åˆ°. Luaä½¿ç”¨å½“å‰å‡½æ•°çš„stackä½œä¸ºå¯„å­˜å™¨ä½¿ç”¨ï¼Œå¯„å­˜å™¨idä»0å¼€å§‹ã€‚å½“å‰å‡½æ•°çš„stackä¸å¯„å­˜å™¨æ•°ç»„æ˜¯ç›¸åŒçš„æ¦‚å¿µ,stack(n)å…¶å®å°±æ˜¯register(n); å¦‚æœæƒ³æ·±å…¥å¿…é¡»å¯¹æ¯ä¸ªæŒ‡ä»¤æ‰€ä»£è¡¨çš„å«ä¹‰è¿›è¡Œæ·±å…¥å‰–æ;

* 4. å¦‚æœé€šè¿‡å†™ä»£ç ,å‡å°‘æŒ‡ä»¤çš„ç”Ÿæˆçš„æ¡ç›®,ç¼–å†™å¥½ä»£ç æ—¶ä½¿ç”¨ luac -l -l xxx.lua å¹¶å¯¹æ¯”ä¹‹å‰æ‰€å†™çš„ä»£ç ,ä»è€ŒæŸ¥æ‰¾é—®é¢˜.
https://blog.csdn.net/yuanlin2008/article/details/8491112   è¿™ä¸€ç³»åˆ—æŒ‡ä»¤çš„å«ä¹‰,éœ€è¦çœ‹ä¸€ä¸‹ CPU æŒ‡ä»¤çš„å«ä¹‰å¯¹æ¯”çœ‹.é…åˆç»ˆç«¯luac -l -l xxx.lua æŸ¥çœ‹.



## Lua è™šæ‹Ÿæœº
* 1. ç¿»è¯‘ä»£ç ä»¥åŠç¼–è¯‘ä¸ºå­—èŠ‚ç çš„éƒ¨åˆ†,åŠ è½½ Lua æºç ,è¿›è¡Œè¯æ³•åˆ†æ,è¯­æ³•åˆ†æ,ç”Ÿæˆå­—èŠ‚ç .
* 2. å°†å­—èŠ‚ç è£…è½½åˆ° lvm.c è™šæ‹Ÿæœºä¸­æ‰§è¡Œ,ä¸»æ‰§è¡Œå‡½æ•°ä¸ºluaV_execute,ä» lua_state è™šæ‹Ÿå †æ ˆä¸­æ‹¿å‡ºå­—èŠ‚ç (æ“ä½œç ),ä¸åœçš„è¿›è¡Œå¾ªç¯æ‰§è¡Œ.
* 3. æ ¹æ®è™šæ‹Ÿæœºè¿è¡Œæµç¨‹æ¥çœ‹,åœ¨ä¸€ä¸ªæ¨¡å—ä¸­,ä½¿ç”¨æœ¬åœ°å˜é‡/å‡½æ•°æ¥æ”¶å…¨å±€å˜é‡/å‡½æ•°,æ—¶é—´æ€§èƒ½æ¯”ç›´æ¥ä½¿ç”¨å…¨å±€çš„æå‡ 30%


## Lua ç¼–è¯‘å™¨ 

* 1. å¯¹äºä¸€ä¸ªchunk(ä»£ç å—)ï¼ŒLuaåœ¨å¯¹å…¶åˆ†æçš„è¿‡ç¨‹ä¸­ç›´æ¥ç”Ÿæˆæœ€ç»ˆçš„æ“ä½œç /å­—èŠ‚ç ï¼Œæ²¡æœ‰å¤šä½™çš„å¯¹æºä»£ç æˆ–è¯­æ³•ç»“æ„çš„éå†ã€‚ä¹Ÿå°±æ˜¯è¯´Luaå¯¹æºä»£ç è¿›è¡Œä¸€æ¬¡éå†å°±ç”Ÿæˆæœ€ç»ˆç»“æœã€‚åˆ†æä»£ç å—çš„ Lua æºä»£ç æ˜¯</code></pre><p>è¯æ³•åˆ†ææ¨¡å—llex.h .c<br>è¯­æ³•åˆ†ææ¨¡å—lparser.h .c<br>æŒ‡ä»¤ç”Ÿæˆæ¨¡å—lcode.h .c</p>
<pre><code>
* 2. åœ¨è¯æ³•åˆ†ææºç é‡Œé¢æœ‰å…³é”®å­—æ•°ç»„ luaX_tokens,ä¼šå°†Luaä»£ç æ‹†åˆ†æˆä¸€ä¸ªä¸ª token</code></pre><p>typedef union {<br>  lua_Number r;<br>  lua_Integer i;<br>  TString <em>ts;<br>} SemInfo;  /</em> è¯­ä¹‰ä¿¡æ¯ */</p>
<p>typedef struct Token {<br>  int token;<br>  SemInfo seminfo;<br>} Token;</p>
<pre><code>è¯­æ³•åˆ†æå™¨æ˜¯æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹çš„é©±åŠ¨å™¨ã€‚é€šè¿‡å¯¹luaY_parserå‡½æ•°çš„è°ƒç”¨ï¼Œå¯åŠ¨æ•´ä¸ªç¼–è¯‘è¿‡ç¨‹ã€‚åœ¨åˆ†æçš„è¿‡ç¨‹ä¸­ï¼Œè¯æ³•åˆ†æå™¨ä¼šè°ƒç”¨æŒ‡ä»¤ç”Ÿæˆå™¨ï¼Œç›´æ¥ç”Ÿæˆæœ€ç»ˆçš„æŒ‡ä»¤ã€‚ä»å®è§‚ä¸Šè®²ï¼Œæ•´ä¸ªç¼–è¯‘è¿‡ç¨‹å°±æ˜¯ç”Ÿæˆproto treeçš„è¿‡ç¨‹ã€‚https://blog.csdn.net/yuanlin2008/article/details/8486463 

* 3. æºä»£ç ç¼–è¯‘åçš„ luac æ–‡ä»¶å°±æ˜¯å­—èŠ‚ç ç¼–è¯‘å™¨,é€šè¿‡ luac -l -l test.lua å¯ä»¥çŸ¥é“å®ƒçš„æ“ä½œç (å­—èŠ‚ç ),luac test.lua ä¹‹åä¼šå‡ºç°ä¸€ä¸ª luac.out,é€šè¿‡ lua è§£é‡Šå™¨æ¥è¿è¡Œ(lua luac.out),å³ lua è§£é‡Šå™¨ç›´æ¥è§£é‡Šäº†å­—èŠ‚ç ,é€Ÿåº¦æ¯”æ‰§è¡ŒåŸç”Ÿä»£ç è¦å¿«å¾ˆå¤š.
* 4. luac å°†æ™®é€š Lua ä»£ç è½¬æˆäºŒè¿›åˆ¶ä»£ç ,ä½¿ç”¨å‘½ä»¤ luac -o test1.lua test.lua å³å¯å°† test.lua ç”ŸæˆäºŒè¿›åˆ¶ä»£ç åœ¨test1.luaä¸­.ç”Ÿæˆçš„ä»£ç å«åšé¢„ç¼–è¯‘ä»£ç </code></pre><pre><code>function test()
    print(&quot;æµ‹è¯•äºŒè¿›åˆ¶ä»£ç &quot;)
end

test()
------------------------------- ç”Ÿæˆçš„äºŒè¿›åˆ¶ä»£ç 
LuaT ï¿½</code></pre><p><br>xV           (w@ï¿½@test.luaï¿½ï¿½ ï¿½Q   O         D F ï¿½ï¿½testï¿½  ï¿½ï¿½ï¿½ï¿½  ï¿½   ï¿½ï¿½  D G  ï¿½ï¿½printï¿½æµ‹è¯•äºŒè¿›åˆ¶ä»£ç ï¿½   ï¿½ï¿½  ï¿½ï¿½ï¿½ï¿½_ENVï¿½Iï¿½  ï¿½ï¿½ï¿½ï¿½_ENV</p>
<pre><code>-------------------------------------------
function test()
print(&quot;æµ‹è¯•äºŒè¿›åˆ¶ä»£ç &quot;)
end

test()

f = io.open(&quot;/Users/xlcw/Desktop/test2.lua&quot;,&quot;wb&quot;)
f:write(string.dump(test))
f:close()
æ­¤æ–¹å¼ä¹Ÿå¯ä»¥ç›´æ¥è¾“å‡ºåˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­,æ–‡ä»¶ä¸­å°±æ˜¯é¢„ç¼–è¯‘çš„äºŒè¿›åˆ¶ä»£ç </code></pre><pre><code>é¢„ç¼–è¯‘å½¢å¼çš„ä»£ç ä¸ä¸€å®šæ¯”æºä»£ç æ›´å°,ä½†æ˜¯å´åŠ è½½æ›´å¿«.é¢„ç¼–è¯‘çš„ä»£ç å¯ä»¥é¿å…å°ç™½ä¿®æ”¹æºç ,å› ä¸ºä½ çœ‹ä¸æ‡‚.å½“éœ€è¦é™åˆ¶åŠ è½½ç±»å‹æ—¶,éœ€è¦ä½¿ç”¨ load çš„ç¬¬ä¸‰ä¸ªå‚æ•°æ§åˆ¶äº†å…è®¸åŠ è½½çš„ä»£ç æ®µçš„ç±»å‹,å¦‚æœè¯¥å‚æ•°æ˜¯ &quot;t&quot; åˆ™å…è®¸åŠ è½½æ–‡æœ¬ä»£ç æ®µ,å¦‚æœæ˜¯ &quot;b&quot; åˆ™å…è®¸åŠ è½½äºŒè¿›åˆ¶(é¢„ç¼–è¯‘)ä»£ç æ®µ,å­—ç¬¦ä¸² &quot;bt&quot; åˆ™å…è®¸åŒæ—¶åŠ è½½æ–‡æœ¬å’ŒäºŒè¿›åˆ¶ä»£ç æ®µ.

* 5. luajit -b xxx.lua xxx.bytes.lua; luac -o xxx.lua xxx.lua.bytes; è¿™ 2 æ¡æŒ‡ä»¤éƒ½ä¼šå°† Lua æºç è½¬æˆå­—èŠ‚ç å½¢å¼çš„ Lua;luajit è½¬æˆçš„å­—èŠ‚ç ä¸å¯é€†.


## lua è§£é‡Šå™¨ 
* 1. æºä»£ç ç¼–è¯‘åçš„ lua ,å­—èŠ‚ç æ–‡ä»¶å¯ä»¥åœ¨è§£é‡Šå™¨ä¸­è¿è¡Œ,æºç æ²¡æœ‰è¢«ç¼–è¯‘æˆå­—èŠ‚ç åˆ™ä¼šå…ˆè¢«ç¼–è¯‘æˆå­—èŠ‚ç ,å†è¿›è¡Œæ‰§è¡Œçš„;


# Lua å­—ç¬¦ä¸²

* 1. æ¯ä¸ªå­˜æ”¾å­—ç¬¦ä¸²çš„å˜é‡,å®é™…ä¸Šå­˜æ”¾çš„å¹¶ä¸æ˜¯ä¸€ä»½å­—ç¬¦ä¸²çš„æ•°æ®å‰¯æœ¬,è€Œæ˜¯è¿™ä»½å­—ç¬¦ä¸²æ•°æ®çš„å¼•ç”¨.æ¯å½“åˆ›å»ºä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²æ—¶,é¦–å…ˆéƒ½ä¼šå»æ£€æŸ¥å½“å‰ç³»ç»Ÿä¸­æ˜¯å¦å·²ç»æœ‰ä¸€ä»½ç›¸åŒçš„å­—ç¬¦ä¸²æ•°æ®äº†,å¦‚æœå­˜åœ¨å°±ç›´æ¥å¤ç”¨,è¿”å›å¼•ç”¨,å¦åˆ™å°±é‡æ–°åˆ›å»ºä¸€ä»½å­—ç¬¦ä¸²æ•°æ®. Lua è™šæ‹Ÿæœºä½¿ç”¨ä¸€ä¸ªæ•£åˆ—æ¡¶æ¥ç®¡ç†æ‰€æœ‰å­—ç¬¦ä¸²,ä¼˜åŒ–ç‚¹:åœ¨è¿™é‡Œå¤šä»½ç›¸åŒçš„å­—ç¬¦ä¸²åœ¨ Lua è™šæ‹Ÿæœºä¸­åªæœ‰ä¸€ä»½å­˜åœ¨,ä½†æ˜¯æ¯æ¬¡åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ä¹Ÿå¤šäº†ä¸€æ¬¡æŸ¥æ‰¾.

* 2. ä¸ºä»€ä¹ˆ .. åœ¨å­—ç¬¦ä¸²è¾ƒå¤šçš„æƒ…å†µä¸‹æ€§èƒ½ä¸å¥½?
    &gt;  .. ç¬¦å·æ˜¯é‡æ–° new ä¸€ä¸ªå­—ç¬¦æ•°ç»„,å°†ä¹‹å‰çš„å­—ç¬¦æ•°æ®æ‹·è´åˆ°è¿™ä¸ªæ–°æ•°ç»„ä¸­,æ—§æ•°ç»„ä¸¢å¼ƒ,è¢« GC æ”¶é›†
    &gt;  æ”¶é›†ä¹‹å, .. å­—ç¬¦ä¸²æŒç»­åˆ›å»º,GC ä¸€ç›´äº§ç”Ÿ,ä¼šæ‹–æ…¢æ•ˆç‡
    &gt;  æ–°çš„ç®—æ³•æ˜¯ä½¿ç”¨ä¸€ä¸ªæ ˆ,æ—§ä¸²åœ¨æ ˆåº•,æ–°ä¸²åœ¨æ ˆé¡¶,æ—§ä¸²æ¯”æ–°ä¸²è¦é•¿,å¦‚æœæ–°ä¸²å¤§äºä¸‹é¢çš„æ—§ä¸²,åˆ™åˆå¹¶.å¾ªç¯è¿›è¡Œåˆ°æ²¡æœ‰ä¸²å¯ä»¥åˆå¹¶æˆ–è€…è¾¾åˆ°æ ˆåº•,io.read /table.concat  éƒ½æ˜¯ä½¿ç”¨çš„è¿™ç§ç®—æ³•



# Lua æ•°æ®ç»“æ„
* 1. Lua çš„ table å¯ä»¥å®ç°æ‰€æœ‰çš„æ•°æ®ç»“æ„,å…·ä½“çš„ä¸ºæ•°ç»„,å¤šç»´æ•°ç»„ä»¥åŠçŸ©é˜µ,é“¾è¡¨ä»¥åŠåŒå‘é“¾è¡¨,æ ˆ,é˜Ÿåˆ—,ä»¥åŠåŒç«¯é˜Ÿåˆ—,åå‘è¡¨,é›†åˆä¸å¤šé‡é›†åˆ,å­—ç¬¦ä¸²ç¼“å­˜åŒº,å›¾
* 2. å­—ç¬¦ä¸² .. æ‹¼æ¥é€ æˆæ€§èƒ½æµªè´¹çš„åŸå› æ˜¯: .. æ‹¼æ¥ä¼šä»åŸæ¥çš„å­—ç¬¦ä¸²é‡Œé¢å¤åˆ¶ä¸€ä»½åˆ°æ–°çš„å†…å­˜é‡Œé¢,å¦‚æœä¸€ç›´å¤åˆ¶,åˆ™ä¼šé€ æˆå†…å­˜æµªè´¹(ä½¿ç”¨ä¸€æ¬¡è¿‡åç›´æ¥ä¸¢å¼ƒä¸ç”¨),è§£å†³æ–¹å¼æ˜¯,æˆ‘ä»¬å¯ä»¥æŠŠä¸€ä¸ªè¡¨å½“æˆç¼“å†²åŒº,ä½¿ç”¨ table.concat æŠŠè¡¨ä¸­çš„æ‰€æœ‰å­—ç¬¦ä¸²è¿æ¥èµ·æ¥å¹¶è¿”å›è¿æ¥åçš„ç»“æœ,è¿™æ ·å°±åœ¨ä¸€æ¬¡å†…å­˜å¤åˆ¶ä¸­å®Œæˆäº†æ‹¼æ¥.
* 3. table åŒ…å«äº†æ•°ç»„ä¸å“ˆå¸Œè¡¨ 2 ç§æ•°æ®ç»“æ„;å“ˆå¸Œè¡¨æ˜¯ä»¥æ‹‰é“¾æ³•çš„æ•£åˆ—è¡¨ç»„æˆçš„;å°½é‡ä¸è¦å°†ä¸€ä¸ªè¡¨æ··ç”¨æ•°ç»„å’Œå“ˆå¸Œè¡¨éƒ¨åˆ†,å³ä¸€ä¸ªè¡¨æœ€å¥½åªå­˜æ”¾ä¸€ç±»æ•°æ®,Lua çš„å®ç°ä¸Šé¢ç»Ÿä¸€äº†éå†,ä½†æ˜¯ä¸åº”è¯¥æ··ç”¨.å°½é‡é¿å…è¿›è¡Œé‡æ–°æ•£åˆ—æ“ä½œ,å› ä¸ºé‡æ–°æ•£åˆ—æ“ä½œä»£ä»·æå¤§,é€šè¿‡é¢„åˆ†é…,åªä½¿ç”¨æ•°ç»„éƒ¨åˆ†ç­‰ç­–ç•¥,è§„é¿è¿™ä¸ª Lua èƒŒåçš„åŠ¨ä½œ,å¯ä»¥æé«˜æ•ˆç‡.

# Lua GC
* 1. æ ¸å¿ƒåŸç†: éå†ç³»ç»Ÿä¸­çš„æ‰€æœ‰å¯¹è±¡,çœ‹é‚£äº›å¯¹è±¡æ²¡æœ‰è¢«å¼•ç”¨,æ²¡æœ‰å¼•ç”¨å…³ç³»çš„å°±è®¤ä¸ºæ˜¯å¯ä»¥å›æ”¶çš„å¯¹è±¡,å¯ä»¥è¢«åˆ é™¤.
* 2. å¦‚ä½•æ‰¾å‡ºæ²¡æœ‰&quot;å¼•ç”¨&quot;çš„å¯¹è±¡?      
å¼•ç”¨è®¡æ•°çš„ GC ç®—æ³•,ä¼šåœ¨ä¸€ä¸ªå¯¹è±¡è¢«å¼•ç”¨çš„æƒ…å†µä¸‹å°†è¯¥å¯¹è±¡çš„å¼•ç”¨è®¡æ•°åŠ ä¸€,åä¹‹å‡ä¸€.å¦‚æœå¼•ç”¨è®¡æ•°ä¸º 0,é‚£ä¹ˆå°±æ˜¯æ²¡æœ‰å¼•ç”¨å¯¹è±¡,éœ€è¦è¢«åˆ é™¤.å¼•ç”¨è®¡æ•°çš„æœ‰ç‚¹äº‹ä¸éœ€è¦æ‰«ææ¯ä¸ªå¯¹è±¡,å¯¹è±¡æœ¬èº«çš„å¼•ç”¨è®¡æ•°åªéœ€è¦å‡åˆ° 0,å°±ä¼šè¢«å›æ”¶,ç¼ºç‚¹æ˜¯ä¼šæœ‰å¾ªç¯å¼•ç”¨é—®é¢˜.          
æ ‡è®°æ¸…é™¤ç®—æ³•(mark and sweep),å®ƒçš„åŸç†æ˜¯æ¯ä¸€æ¬¡åš GC çš„æ—¶å€™,é¦–å…ˆæ‰«æå¹¶ä¸”æ ‡è®°ç³»ç»Ÿä¸­çš„æ‰€æœ‰å¯¹è±¡,è¢«æ‰«æå¹¶ä¸”æ ‡è®°åˆ°çš„å¯¹è±¡æ˜¯å¯è¾¾çš„(reachable),è¿™äº›å¯¹è±¡ä¸ä¼šè¢«å›æ”¶,åä¹‹,æ²¡æœ‰è¢«æ ‡è®°çš„å¯¹è±¡è®¤ä¸ºæ˜¯å¯ä»¥è¢«å›æ”¶çš„,Lua é‡‡ç”¨çš„æ˜¯è¿™ç§ç®—æ³•.
* 3.  Lua5.3 åƒåœ¾æ”¶é›†å™¨ä½¿ç”¨äº†ç®€å•çš„ æ ‡è®°-æ¸…é™¤(mark-and-sweep) å¼ç®—æ³•, åˆè¢«ç§°ä¹‹ä¸º&quot;stop-the-world&quot;(å…¨å±€æš‚åœ)å¼çš„æ”¶é›†ç®—æ³•(é¡¾åæ€ä¹‰,å°±æ˜¯ GC çš„æ—¶å€™,æ‰€æœ‰ä»£ç æš‚åœè¿è¡Œ,ç­‰å¾… GC è¿è¡Œå®Œæ¯•å†è¿›è¡Œ), æ¯æ¬¡GCå³ä¸€ä¸ªå‘¨æœŸ,éœ€è¦ 4 ä¸ªé˜¶æ®µ:æ ‡è®°(mark),æ¸…ç†(cleaning),æ¸…é™¤(sweep),å’Œææ„(finalization)</code></pre><pre><code>æ ‡è®°é˜¶æ®µ: 
      æŠŠæ ¹èŠ‚ç‚¹é›†åˆ(root set) æ ‡è®°ä¸ºæ´»è·ƒ,æ ¹èŠ‚ç‚¹é›†åˆç”± Lua è¯­è¨€å¯ä»¥ç›´æ¥è®¿é—®çš„å¯¹è±¡ç»„æˆ.åœ¨ Lua è¯­è¨€ä¸­,è¿™ä¸ªé›†åˆåªåŒ…æ‹¬ C æ³¨å†Œè¡¨.å½“æ‰€æœ‰å¯è¾¾å¯¹è±¡éƒ½è¢«æ ‡è®°ä¸ºæ´»è·ƒå,æ ‡è®°é˜¶æ®µå®Œæˆ.
æ¸…ç†é˜¶æ®µ:
      è¿™ä¸ªé˜¶æ®µå¤„ç†ææ„å™¨ä¸å¼±å¼•ç”¨è¡¨.é¦–å…ˆ,Lua è¯­è¨€éå†æ‰€æœ‰è¢«æ ‡è®°ä¸ºéœ€è¦è¿›è¡Œææ„,ä½†åˆæ²¡æœ‰è¢«æ ‡è®°ä¸ºæ´»è·ƒçš„å¯¹è±¡.è¿™äº›å¯¹è±¡ä¼šè¢«æ ‡è®°ä¸ºæ´»è·ƒå¹¶å•ç‹¬æ”¾åœ¨ä¸€ä¸ªææ„è¡¨ä¸­.ç„¶åéå†å¼±å¼•ç”¨è¡¨,å¹¶é‡ä¸­ç§»é™¤é”®æˆ–å€¼æœªè¢«æ ‡è®°çš„å…ƒç´ .
æ¸…é™¤é˜¶æ®µ:
      éå†æ‰€æœ‰å¯¹è±¡,æ‰€æœ‰å¯¹è±¡éƒ½æ”¾åœ¨ä¸€ä¸ªé“¾è¡¨ä¸­,å¦‚æœä¸€ä¸ªå¯¹è±¡æ²¡æœ‰è¢«æ ‡è®°ä¸ºæ´»è·ƒ,åˆ™å›æ”¶,å¦åˆ™æ¸…ç†æ ‡è®°.
ææ„é˜¶æ®µ:
      Lua è¯­è¨€è°ƒç”¨æ¸…ç†é˜¶æ®µè¢«åˆ†ç¦»å‡ºçš„å¯¹è±¡çš„ææ„å™¨.</code></pre><pre><code>* 4. Lua5.0 ç‰ˆæœ¬æ˜¯åŒè‰²æ ‡è®°æ¸…é™¤ç®—æ³•(Two-Color Mark and Sweep),åŸç†æ˜¯ç³»ç»Ÿä¸­çš„æ¯ä¸ªå¯¹è±¡éé»‘å³ç™½,ä¹Ÿå°±æ˜¯è¦ä¹ˆè¢«å¼•ç”¨(é»‘)è¦ä¹ˆæ²¡æœ‰è¢«å¼•ç”¨(ç™½),è¿™ä¸ªç®—æ³•çš„ç¡®å®šæ˜¯æ¯ä¸ªå¯¹è±¡ä¸æ˜¯é»‘å°±æ˜¯ç™½,éå†æ—¶,ä¸èƒ½è¢«æ‰“æ–­,å¦åˆ™æ— æ³•å®Œå…¨ GC,æ‰€ä»¥ä¼šè®©æ‰€æœ‰å…¶ä»–æ“ä½œæš‚åœ,ä¼šå¡é¡¿çš„åŸå› .Lua5.1 é‡‡ç”¨äº†ä¸‰è‰²å¢é‡æ ‡è®°æ¸…é™¤ç®—æ³•(Tri-Color Incremental Mark and Sweep),è¿™ä¸ªç®—æ³•é”äº†ä¸€ç§é¢œè‰²(ç°è‰²),æ‰€ä»¥ä¸å¿…ä¸€æ¬¡æ€§çš„æ‰«æå®Œæ‰€æœ‰å¯¹è±¡,GC å¯ä»¥å¢é‡å®Œæˆ,ä¸­æ–­å†æ¢å¤(ç›¸å½“äºæˆ‘ä»¬å¹³å¸¸æ‰€è¯´çš„ä¸­é—´çŠ¶æ€).</code></pre><pre><code>ç™½è‰²: å½“å‰å¯¹è±¡ä¸ºå¾…è®¿é—®çŠ¶æ€,è¡¨ç¤ºå¯¹è±¡è¿˜æ²¡æœ‰è¢« GC æ ‡è®°è¿‡,è¿™ä¹Ÿæ˜¯ä»»ä½•ä¸€ä¸ªå¯¹è±¡åˆ›å»ºåçš„åˆå§‹çŠ¶æ€;å¦‚æœä¸€ä¸ªå¯¹è±¡åœ¨ç»“æŸ GC æ‰«æè¿‡ç¨‹å,ä»ç„¶æ˜¯ç™½è‰²,
     åˆ™è¯´æ˜è¯¥å¯¹è±¡æ²¡æœ‰è¢«ç³»ç»Ÿä¸­çš„ä»»ä½•ä¸€ä¸ªå¯¹è±¡æ‰€å¼•ç”¨,å¯ä»¥å›æ”¶å…¶ç©ºé—´äº†.
ç°è‰²: å½“å‰å¯¹è±¡ä¸ºå¾…æ‰«æçŠ¶æ€,è¡¨ç¤ºå¯¹è±¡å·²ç»è¢« GC è®¿é—®è¿‡,ä½†æ˜¯è¯¥å¯¹è±¡å¼•ç”¨å…¶ä»–å¯¹è±¡è¿˜æ²¡æœ‰è¢«è®¿é—®åˆ°.
é»‘è‰²: å½“å‰å¯¹è±¡å·²ä¸ºæ‰«æçŠ¶æ€,è¡¨ç¤ºå¯¹è±¡å·²ç»è¢« GC è®¿é—®è¿‡,å¹¶ä¸”è¯¥å¯¹è±¡å¼•ç”¨çš„å…¶ä»–å¯¹è±¡ä¹Ÿè¢«è®¿é—®è¿‡äº†.

GC è¿‡ç¨‹

åˆå§‹é˜¶æ®µ: 
    éå† root èŠ‚ç‚¹ä¸­å¼•ç”¨çš„å¯¹è±¡,ä»ç™½è‰²ç½®ä¸ºç°è‰²,å¹¶ä¸”æ”¾å…¥åˆ°ç°è‰²èŠ‚ç‚¹åˆ—è¡¨ä¸­(æ­¤æ—¶çš„å¯¹è±¡å·²è¢«è®¿é—®è¿‡).
æ ‡è®°é˜¶æ®µ:   
    å½“ç°è‰²é“¾è¡¨ä¸­è¿˜æœ‰æœªæ‰«æçš„å…ƒç´ : 
        ä»ä¸­å–å‡ºä¸€ä¸ªå¯¹è±¡,æ£€æµ‹,æ ‡è®°ä¸ºé»‘è‰²
        éå†è¿™ä¸ªå¯¹è±¡å…³è”çš„å…¶ä»–æ‰€æœ‰å¯¹è±¡:
            å¦‚æœæ˜¯ç™½è‰²:æ ‡è®°ä¸ºç°è‰²,åŠ å…¥ç°è‰²é“¾è¡¨ä¸­
å›æ”¶é˜¶æ®µ:
    éå†æ‰€æœ‰å¯¹è±¡:
        å¦‚æœä¸ºç™½è‰²:
            è¿™äº›å¯¹è±¡éƒ½æ˜¯æ²¡æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡,é€ä¸ªå›æ”¶.  
        å¦åˆ™:
            é‡æ–°åŠ å…¥å¯¹è±¡é“¾è¡¨ä¸­ç­‰å¾…ä¸‹ä¸€è½® GC æ£€æŸ¥.

ä¸Šé¢ GC ä¸­çš„é—®é¢˜,æ²¡æœ‰è§£å†³æ ‡è®°é˜¶æ®µä¹‹åæ–°åˆ›å»ºçš„å¯¹è±¡æ˜¯ç™½è‰²çš„æƒ…å†µ,æ€ä¹ˆè§£å†³?(å†å¼•å…¥ä¸€ä¸ªçŠ¶æ€ç ,å‡¡æ˜¯å¤æ‚é—®é¢˜,åŸºæœ¬éƒ½æ˜¯è¿™ä¸ªæ€è·¯)
    GC ç®—æ³•é™¤äº†å‰é¢çš„ä¸‰è‰²æ¦‚å¿µä¹‹å¤–,åˆç»†åˆ†å‡ºä¸€ä¸ª&quot;åŒç™½è‰²&quot;çš„æ¦‚å¿µ,ç®€å•çš„è¯´,Lua ä¸­çš„ç™½è‰²åˆ†ä¸º&quot;å½“å‰ç™½è‰²&quot;å’Œ&quot;éå½“å‰ç™½è‰²&quot;.è¿™ 2 ç§ç™½è‰²çš„çŠ¶æ€äº¤æ›¿ä½¿ç”¨,ç¬¬ N æ¬¡ GC ä½¿ç”¨çš„ç¬¬ä¸€ç§ç™½è‰²,é‚£ä¹ˆä¸‹ä¸€æ¬¡å°±ä½¿ç”¨å¦å¤–ä¸€ç§,ä»¥æ­¤ç±»æ¨.ä»£ç åœ¨å›æ”¶æ—¶,ä¼šæ£€æŸ¥,å¦‚æœå¯¹è±¡çš„ç™½è‰²ä¸æ˜¯æ­¤æ¬¡ GC ä½¿ç”¨çš„ç™½è‰²çŠ¶æ€,é‚£ä¹ˆå°†ä¸ä¼šè®¤ä¸ºæ˜¯æ²¡æœ‰è¢«å¼•ç”¨çš„å¯¹è±¡è€Œå›æ”¶,è¿™æ ·çš„ç™½è‰²å¯¹è±¡å°†ç•™åœ¨ä¸‹ä¸€æ¬¡ GC ä¸­è¿›è¡Œæ‰«æ,å› ä¸ºä¸‹ä¸€æ¬¡ GC ä¸­ä¸Šä¸€æ¬¡å¹¸å…çš„ç™½è‰²å°†æˆä¸ºè¿™æ¬¡çš„å›æ”¶é¢œè‰².</code></pre><pre><code>
* 5. åœ¨ Lua ä»£ç ä¸­,æœ‰ 2 ç§å›æ”¶æ–¹å¼,ä¸€ç§æ˜¯è‡ªåŠ¨å›æ”¶,ä¸€ç§æ˜¯ç¨‹åºè‡ªå·±è°ƒç”¨ API æ¥è§¦å‘ä¸€æ¬¡å›æ”¶.</code></pre><pre><code>    è‡ªåŠ¨å›æ”¶ä¼šåœ¨æ¯æ¬¡è°ƒç”¨å†…å­˜åˆ†é…ç›¸å…³çš„æ“ä½œæ—¶æ£€æŸ¥æ˜¯å¦æ»¡è¶³è§¦å‘æ¡ä»¶,è¿™ä¸ªæ“ä½œåœ¨å® luaC_checkGC ä¸­è¿›è¡Œ.
è§¦å‘è‡ªåŠ¨ GC çš„æ¡ä»¶å°±æ˜¯:totalbytes å¤§äºç­‰äº GCthreshold å€¼,åœ¨è¿™ä¸¤ä¸ªå˜é‡ä¸­,totalbytes ç”¨äºä¿å­˜å½“å‰åˆ†é…çš„å†…å­˜å¤§å°,è€Œ GCthreshold æ˜¯ä¸€ä¸ªé˜ˆå€¼,
è¿™ä¸ªå€¼å¯ä»¥ç”±ä¸€äº›å‚æ•°å½±å“å’Œæ§åˆ¶,ç”±æ­¤æ”¹å˜è§¦å‘çš„æ¡ä»¶.æ­¤æƒ…å†µä¸å¯æ§,å…³é—­æ–¹å¼æ˜¯å°†GCthresholdè®¾ç½®ä¸ºä¸€ä¸ªéå¸¸å¤§çš„å€¼,æ¥è¾¾åˆ°ä¸€ç›´ä¸æ»¡è¶³è‡ªåŠ¨è§¦å‘çš„æ¡ä»¶.          

    æ‰‹åŠ¨ GC å—å“ªäº›å‚æ•°å½±å“? estimate/gcpause ä¸¤ä¸ªæˆå‘˜å°†å½±å“æ¯æ¬¡ GCthreshold çš„å€¼;#define setthreshold(g)  (g-&gt;GCthreshold = (g-&gt;estimate/100)g-&gt;gcpause)
estimate æ˜¯ä¸€ä¸ªé¢„ä¼°çš„å½“å‰ä½¿ç”¨çš„å†…å­˜æ•°é‡,gcpause åˆ™æ˜¯ä¸€ä¸ªç™¾åˆ†æ¯”,è¿™ä¸ªå®çš„ä½œç”¨å°±æ˜¯æŒ‰ç…§ä¼°è®¡å€¼çš„ç™¾åˆ†æ¯”è®¡ç®—å‡ºæ–°çš„é˜ˆå€¼.
gcpause é€šè¿‡ lua_gc è¿™ä¸ªCçš„æ¥å£æ¥è¿›è¡Œè®¾ç½®,å¯ä»¥çœ‹åˆ°,ç™¾åˆ†æ¯”è¶Šå¤§,ä¸‹ä¸€æ¬¡å¼€å§‹ GC çš„æ—¶é—´å°±ä¼šè¶Šé•¿.
å¦ä¸€ä¸ªå½±å“ GC è¿›åº¦çš„å‚æ•°æ˜¯ gcstepmul æˆå‘˜,å®ƒåŒæ ·å¯ä»¥é€šè¿‡ lua_gc æ¥è®¾ç½®,è¿™ä¸ªå‚æ•°å°†å½±å“æ¯æ¬¡æ‰‹åŠ¨ GC æ—¶è°ƒç”¨ singlestep å‡½æ•°çš„æ¬¡æ•°,ä»è€Œå½±å“ GC å›æ”¶çš„é€Ÿåº¦.
å¦‚æœå¸Œæœ›å…³é—­ GC,è¿˜éœ€è¦å†æ‰‹åŠ¨æ‰§è¡Œå®Œä¸€æ¬¡ GC ä¹‹å,é‡æ–°è®¾ç½®å…³é—­è‡ªåŠ¨ GC</code></pre><pre><code>



* 6. ä½¿ç”¨å¼±è¡¨,ç»™å…ƒè¡¨èµ‹å€¼ __mode = &quot;kv&quot;
* 7. ä½¿ç”¨ææ„,ç»™å…ƒè¡¨èµ‹å€¼ __gc = function () end æ–¹æ³•é‡Œé¢è‡ªå·±å†™æ¸…é™¤ä»£ç .

* 8. Lua 5.1 ä½¿ç”¨äº†å¢é‡å¼åƒåœ¾æ”¶é›†å™¨,å®ƒä¸è§£é‡Šå™¨äº¤æ›¿è¿è¡Œ,Lua5.2ä¸­æœ‰ç´§æ€¥åƒåœ¾æ”¶é›†,å½“å†…å­˜åˆ†é…å¤±è´¥çš„æ—¶å€™,Lua ä¼šè¿›è¡Œä¸€æ¬¡å®Œæ•´çš„åƒåœ¾æ”¶é›†,é‡æ–°åˆ†é…å†…å­˜.</code></pre><p>collectgarbage<br>stopï¼šåœæ­¢åƒåœ¾æ”¶é›†å™¨ï¼Œç›´åˆ°ä½¿ç”¨é€‰é¡¹â€œrestartâ€œå†æ¬¡è°ƒç”¨ collectgarbage<br>restartâ€œï¼šé‡å¯åƒåœ¾æ”¶é›†å™¨ã€‚<br>collectâ€œï¼šæ‰§è¡Œä¸€æ¬¡å®Œæ•´çš„åƒåœ¾æ”¶é›†ï¼Œå›æ”¶å’Œææ„æ‰€æœ‰ä¸å¯è¾¾çš„å¯¹è±¡ã€‚è¿™æ˜¯é»˜è®¤çš„é€‰é¡¹<br>stepâ€œï¼šæ‰§è¡ŒæŸäº›åƒåœ¾æ”¶é›†å·¥ä½œï¼Œç¬¬äºŒä¸ªå‚æ•° data æŒ‡æ˜å·¥ä½œé‡ï¼Œå³åœ¨åˆ†é…äº† data ä¸ªå­—èŠ‚ååƒåœ¾æ”¶é›†å™¨åº”è¯¥åšä»€ä¹ˆã€‚<br>countâ€œï¼šä»¥ KB ä¸ºå•ä½è¿”å›å½“å‰å·²ç”¨å†…å­˜æ•°ï¼Œè¯¥ç»“æœæ˜¯ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œä¹˜ä»¥ 1024 å¾—åˆ°çš„å°±æ˜¯ç²¾ç¡®çš„å­—èŠ‚æ•°ã€‚è¯¥å€¼åŒ…æ‹¬äº†å°šæœªè¢«å›æ”¶çš„æ­»å¯¹è±¡ã€‚<br>setpauseâ€œï¼šè®¾ç½®æ”¶é›†å™¨çš„ pause å‚æ•°ï¼ˆé—´ç‡ï¼‰ã€‚å‚æ•° data ä»¥ç™¾åˆ†æ¯”ä¸ºå•ä½ç»™å‡ºè¦è®¾å®šçš„æ–°å€¼ï¼šå½“ data ä¸º 100 æ—¶ï¼Œå‚æ•°è¢«è®¾ä¸º 1 (100%ï¼‰ã€‚<br>setstepmulâ€œï¼šè®¾ç½®æ”¶é›†å™¨çš„ stepmom å‚æ•°ï¼ˆæ­¥è¿›å€ç‡ï¼Œstep multiplierï¼‰ã€‚å‚æ•° data ç»™å‡ºæ–°å€¼ï¼Œä¹Ÿæ˜¯ä»¥ç™¾åˆ†æ¯”ä¸ºå•ä½ã€‚     </p>
<pre><code>
* 9. GC ,åƒåœ¾å›æ”¶ç®—æ³•è¢«ç§°ä¸º&quot;mark-and-sweep&quot;ç®—æ³•;é¦–å…ˆï¼Œç³»ç»Ÿç®¡ç†ç€æ‰€æœ‰å·²ç»åˆ›å»ºäº†çš„å¯¹è±¡ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ã€‚rooté›†åˆä»£è¡¨ç€å·²çŸ¥çš„ç³»ç»Ÿçº§åˆ«çš„å¯¹è±¡å¼•ç”¨ã€‚æˆ‘ä»¬ä»rooté›†åˆå‡ºå‘ï¼Œå°±å¯ä»¥è®¿é—®åˆ°ç³»ç»Ÿå¼•ç”¨åˆ°çš„æ‰€æœ‰å¯¹è±¡ã€‚è€Œæ²¡æœ‰è¢«è®¿é—®åˆ°çš„å¯¹è±¡å°±æ˜¯åƒåœ¾å¯¹è±¡ï¼Œéœ€è¦è¢«é”€æ¯ã€‚
&gt;WhiteçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å¾…è®¿é—®çŠ¶æ€ã€‚è¡¨ç¤ºå¯¹è±¡è¿˜æ²¡æœ‰è¢«åƒåœ¾å›æ”¶çš„æ ‡è®°è¿‡ç¨‹è®¿é—®åˆ°ã€‚        
&gt;GrayçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å¾…æ‰«æçŠ¶æ€ã€‚è¡¨ç¤ºå¯¹è±¡å·²ç»è¢«åƒåœ¾å›æ”¶è®¿é—®åˆ°äº†ï¼Œä½†æ˜¯å¯¹è±¡æœ¬èº«å¯¹äºå…¶ä»–å¯¹è±¡çš„å¼•ç”¨è¿˜æ²¡æœ‰è¿›è¡Œéå†è®¿é—®ã€‚     
&gt;BlackçŠ¶æ€ï¼Œä¹Ÿå°±æ˜¯å·²æ‰«æçŠ¶æ€ã€‚è¡¨ç¤ºå¯¹è±¡å·²ç»è¢«è®¿é—®åˆ°äº†ï¼Œå¹¶ä¸”ä¹Ÿå·²ç»éå†äº†å¯¹è±¡æœ¬èº«å¯¹å…¶ä»–å¯¹è±¡çš„å¼•ç”¨ã€‚        
å°†ä¸‰ä¸ªæ¡ä»¶åˆ†å¸ƒæ‰§è¡Œ,ä¸ä¸€æ¬¡æ‰§è¡Œ,è¿™æ ·å°±æ˜¯å¢é‡åƒåœ¾å›æ”¶æœºåˆ¶(Incremental Garbage Collection)IGC.å¥½å¤„æ˜¯ä¸ä¼šå¡é¡¿,åå¤„æ˜¯æœ¬æ¬¡æœ‰å¯èƒ½ä¸ä¼šæŠŠæ‰€æœ‰çš„éœ€è¦å›æ”¶çš„å¯¹è±¡å…¨éƒ¨å›æ”¶,ä¼šåœ¨ä¸‹æ¬¡å›æ”¶.



# Lua çƒ­æ›´åŸç†
* 1. åœ¨ registry[&quot;_LOADED&quot;]è¡¨ä¸­åˆ¤æ–­è¯¥æ¨¡å—æ˜¯å¦å·²ç»åŠ è½½è¿‡äº†,å¦‚æœæ˜¯åˆ™è¿”å›,é¿å…é‡å¤åŠ è½½æŸä¸ªæ¨¡å—ä»£ç .
* 2. ä¾æ¬¡è°ƒç”¨æ³¨å†Œçš„ loader æ¥åŠ è½½æ¨¡å—,ä¾æ¬¡è°ƒç”¨å››ç§ loader</code></pre><pre><code>static const lua_CFunction loaders[] =
    {loader_preload, loader_Lua, loader_C, loader_Croot, NULL};</code></pre><pre><code>* 3. å°†åŠ è½½è¿‡çš„æ¨¡å—èµ‹å€¼ç»™ registry[&quot;_LOADED&quot;]è¡¨.
* 4. Lua çš„ä»£ç çƒ­æ›´æ–°,ä¹Ÿå°±æ˜¯éœ€è¦é‡æ–°åŠ è½½æŸä¸ªæ¨¡å—,æœ€ç»ˆæ•ˆæœæ˜¯,åœ¨æ¸¸æˆè¿è¡ŒæœŸé—´,ä¾ç„¶å¯ä»¥é‡æ–°åŠ è½½è¿™ä¸ªæ¨¡å—è€Œæ‰§è¡Œä»£ç .å› æ­¤éœ€è¦è®©Luaè™šæ‹Ÿæœºè®¤ä¸ºå®ƒä¹‹å‰æ²¡æœ‰åŠ è½½è¿‡,æŸ¥çœ‹ Lua ä»£ç å¯ä»¥å‘ç°,registry[&quot;_LOADED&quot;] è¡¨å®é™…ä¸Šå°±æ˜¯ package.loaded è¡¨,ä¹Ÿå°±æ˜¯è¯´å°† package.loaded[name] = null;package.loaded[name] = name;å³å¯å®ç°çƒ­æ›´æ–°.
* 5. åœ¨ä¸Šé¢æœ‰ä¸ªé—®é¢˜,å°±æ˜¯å†…å­˜ä¸­å·²ç»åœ¨ä½¿ç”¨çš„ä»£ç æ— æ³•è¢«ç½®ç©º,å› ä¸ºè¿™æ˜¯ä¼šå½±å“å½“å‰æ¸¸æˆè¿›ç¨‹,åªæœ‰åœ¨å½“å‰æ¸¸æˆç•Œé¢æ²¡æœ‰ä½¿ç”¨åˆ°çš„Lua ä»£ç æ‰å¯ä»¥é‡æ–°åŠ è½½å¤„ç†,å¦åˆ™ä¼šäº§ç”Ÿå´©æºƒé”™è¯¯.


# LuaJIT 

* 1. Foreign Function Interface (FFI) å³ä¸€ç§åœ¨ A è¯­è¨€ä¸­è°ƒç”¨ B è¯­è¨€çš„æœºåˆ¶,é€šå¸¸æ¥è¯´,æ˜¯æŒ‡å…¶ä»–è¯­è¨€è°ƒç”¨ C å‡½æ•°;è·¨è¯­è¨€è°ƒç”¨,å°±å¿…é¡»è§£å†³ C å‡½æ•°æŸ¥æ‰¾å’ŒåŠ è½½,ä»¥åŠ Lua å’Œ C ä¹‹é—´çš„ç±»å‹è½¬æ¢çš„é—®é¢˜.

* 2. FFI çš„åŸç†,POSIX çš„ dlopen å’Œ dlsymï¼Œä»¥åŠ Windows ä¸Šçš„ LoadLibraryExA å’Œ GetProcAddressã€‚å‰è€…ç”¨äºåŠ è½½å¯¹åº”çš„é“¾æ¥åº“ï¼Œåè€…ç”¨äºæŸ¥æ‰¾å¹¶åŠ è½½å¯¹åº”çš„å‡½æ•°ç¬¦å·ã€‚ç±»ä¼¼äºå…ˆåŠ è½½è¿™ä¸ªé“¾æ¥åº“æ–‡ä»¶,å†ä»æ–‡ä»¶ä¸­æŸ¥æ‰¾æ–¹æ³•çš„æŒ‡é’ˆ,è°ƒç”¨æ–¹æ³•,è¿™æ˜¯ç›´æ¥è°ƒç”¨ C çš„å‡½æ•°åœ°å€æ–¹å¼</code></pre><pre><code>ä½¿ç”¨ FFI è°ƒç”¨æ–¹æ³•å…·ä½“çš„è¡Œä¸ºæ­¥éª¤:
    1. å¯æ‰§è¡Œç¨‹åºè‡ªå·±çš„å…¨å±€ç¬¦å·
    2. å®ƒçš„ä¾èµ–çš„ç¬¦å·.
    3. åœ¨ dlopen åŠ è½½æ—¶æŒ‡å®š RTLD_GLOBAL flag çš„é“¾æ¥åº“</code></pre><pre><code>åœ¨ç¼–è¯‘æ¨¡å¼ä¸‹ LuaJITæ­¤æ—¶ä¸ä¼šèµ° dlsym,è€Œæ˜¯ç›´æ¥è°ƒç”¨ C çš„å‡½æ•°åœ°å€.
æˆ‘ä»¬è¦çŸ¥é“åŠ è½½è¿›æ¥çš„ç¬¦å·æ˜¯ä¸ªä»€ä¹ˆç»“æ„å†…å®¹,è¿™æ˜¯ ffi.cdef çš„æ„ä¹‰
è§£é‡Šæ¨¡å¼ä¸‹çš„ LuaJITçš„FFIæ“ä½œå¾ˆæ…¢,æ¯”ç¼–è¯‘æ¨¡å¼ä¸‹æ…¢åå€.

* 3. pbåº“ https://www.cnblogs.com/xiaohutu/p/12168781.html ,åœ¨ C ä¸Šç»“åˆ Lua å°è£…äº†ä¸€å±‚,å¯ä»¥åœ¨ Lua ä»£ç ä¸­ä½¿ç”¨;ç›®å‰é€šç”¨çš„æ˜¯äº‘é£çš„ pbc åº“ https://github.com/cloudwu/pbc, xlua ç”¨çš„ä¹Ÿæ˜¯ https://github.com/chexiongsheng/build_xlua_with_libs/tree/master/build/pbc äº‘é£çš„;

* 4. lpeg æ¨¡å¼åŒ¹é…;bit.c ä½æ“ä½œ;uint64.c/int64.c æ”¯æŒ 64 ä½;</code></pre>
      
       <hr><span style="font-style: italic;color: gray;"> è½¬è½½è¯·æ³¨æ˜æ¥æºï¼Œæ¬¢è¿å¯¹æ–‡ç« ä¸­çš„å¼•ç”¨æ¥æºè¿›è¡Œè€ƒè¯ï¼Œæ¬¢è¿æŒ‡å‡ºä»»ä½•æœ‰é”™è¯¯æˆ–ä¸å¤Ÿæ¸…æ™°çš„è¡¨è¾¾ã€‚å¯ä»¥åœ¨ä¸‹é¢è¯„è®ºåŒºè¯„è®ºï¼Œä¹Ÿå¯ä»¥é‚®ä»¶è‡³ 1487842110@qq.com </span>
    </div>
</article>


<p>
    <a  class="dashang" onclick="dashangToggle()">Love</a>
</p>


<div class="article_copyright">
    <p><span class="copy-title">Title:</span>Lua æºç é˜…è¯»</p>
    <p><span class="copy-title">æ–‡ç« å­—æ•°:</span><span class="post-count">9.6k</span></p>
    <p><span class="copy-title">Author:</span><a  title="è¯¸å­ç™¾å®¶-è°çš„å¤©ä¸‹?">è¯¸å­ç™¾å®¶-è°çš„å¤©ä¸‹?</a></p>
    <p><span class="copy-title">Created At:</span>2020-05-08, 11:41:32</p>
    <p><span class="copy-title">Updated At:</span>2021-03-09, 15:11:32</p>
    <span class="copy-title">Url:</span><a class="post-url" href="/2020/05/08/Unity/ToLua/Lua%20%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/" title="Lua æºç é˜…è¯»">http://yoursite.com/2020/05/08/Unity/ToLua/Lua%20%E6%BA%90%E7%A0%81%E9%98%85%E8%AF%BB/</a>
    <p>
        <span class="copy-title">Copyright:</span><i class="fa fa-creative-commons"></i> <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" title="CC BY-NC-SA 4.0 International" target = "_blank">"ç½²å-éå•†ç”¨-ç›¸åŒæ–¹å¼å…±äº« 4.0"</a> è½¬è½½è¯·ä¿ç•™åŸæ–‡é“¾æ¥åŠä½œè€…ã€‚
    </p>
</div>



    <div id="comments"></div>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

<script type="text/javascript">
    $.getScript('/js/gitalk.js', function () {
        var gitalk = new Gitalk({
            clientID: '78dbe1e4dd28ca4c4b5e',
            clientSecret: 'e49ada68130b4d709a242b8dd8f4e844b14f35f9',
            repo: 'xinzhuzi.github.io',
            owner: 'xinzhuzi',
            admin: ['xinzhuzi'],
            id: decodeURI(location.pathname),
            distractionFreeMode: 'true',
            language: 'zh-CN',
            perPage: parseInt('20',10)
        })
        gitalk.render('comments')
    })
</script>




    




    </div>
    <div class="copyright">
        <p class="footer-entry">Â©2016-2019 xinzhuzi</p>
<p class="footer-entry">Built with <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/xinzhuzi/hexo-theme-3-hexo" target="_blank">3-hexo</a> theme</p>

    </div>
    <div class="full-toc">
        <button class="full"><span class="min "></span></button>
<button class="post-toc-menu"><span class="post-toc-menu-icons"></span></button>
<div class="post-toc"><span class="post-toc-title">ç›®å½•</span>
    <div class="post-toc-content">

    </div>
</div>
<a class="" id="rocket" ></a>

    </div>
</div>
<div class="acParent"></div>

<div class="hide_box" onclick="dashangToggle()"></div>
<div class="shang_box">
    <a class="shang_close"  onclick="dashangToggle()">Ã—</a>
    <div class="shang_tit">
        <p>çˆ±ä½ ,çˆ±ä¸–äºº</p>
    </div>
    <div class="shang_payimg">
        <div class="pay_img">
            <img src="/img/alipay.png" class="alipay" title="æ‰«ç æ”¯æŒ">
            <img src="/img/weixin.png" class="weixin" title="æ‰«ç æ”¯æŒ">
        </div>
    </div>
    <div class="shang_payselect">
        <span><label><input type="radio" name="pay" checked value="alipay">alipay</label></span><span><label><input type="radio" name="pay" value="weixin">weixin</label></span>
    </div>
</div>


</body>
<script src="/js/jquery.pjax.js?v=1.0.1" ></script>

<script src="/js/script.js?v=1.0.1" ></script>
<script>
    var img_resize = 'default';
    /*ä½œè€…ã€æ ‡ç­¾çš„è‡ªåŠ¨è¡¥å…¨*/
    $(function () {
        $('.search').AutoComplete({
            'data': ['@æ–°è¯¸å­','@è¯¸å­ç™¾å®¶-è°çš„å¤©ä¸‹?','#language','#CSharp','#Net','#Protobuf,lua','#re','#æŒ‡é’ˆ','#Renderer','#tool','#UnityEditor','#UnityUI','#ç®—æ³•','#æ‚é¡¹','#Unity','#BestHttp','#IndustrialAutomation','#Unityä¼˜åŒ–','#ToLua','#VSCode',],
            'itemHeight': 20,
            'width': 418
        }).AutoComplete('show');
    })
    function initArticle() {
        /*æ¸²æŸ“å¯¹åº”çš„è¡¨æ ¼æ ·å¼*/
        
            $(".post .pjax table").addClass("green_title");
        

        /*æ¸²æŸ“æ‰“èµæ ·å¼*/
        
        $("input[name=pay]").on("click", function () {
            if($("input[name=pay]:checked").val()=="weixin"){
                $(".shang_box .shang_payimg .pay_img").addClass("weixin_img");
            } else {
                $(".shang_box .shang_payimg .pay_img").removeClass("weixin_img");
            }
        })
        

        /*é«˜äº®ä»£ç å—è¡Œå·*/
        
        $('pre code').each(function(){
            var lines = $(this).text().trim().split('\n').length, widther='';
            if (lines>99) {
                widther = 'widther'
            }
            var $numbering = $('<ul/>').addClass('pre-numbering ' + widther).attr("unselectable","on");
            $(this).addClass('has-numbering ' + widther)
                    .parent()
                    .append($numbering);
            for(var i=1;i<=lines;i++){
                $numbering.append($('<li/>').text(i));
            }
        });
        

        /*è®¿é—®æ•°é‡*/
        
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js");
        

        /*ä»£ç é«˜äº®ï¼Œè¡Œå·å¯¹é½*/
        $('.pre-numbering').css('line-height',$('.has-numbering').css('line-height'));

        
        
    }

    /*æ‰“èµé¡µé¢éšè—ä¸å±•ç¤º*/
    
    function dashangToggle() {
        $(".shang_box").fadeToggle();
        $(".hide_box").fadeToggle();
    }
    

</script>

<!--åŠ å…¥è¡Œå·çš„é«˜äº®ä»£ç å—æ ·å¼-->

<style>
    pre{
        position: relative;
        margin-bottom: 24px;
        border-radius: 10px;
        border: 1px solid #e2dede;
        background: #FFF;
        overflow: hidden;
    }
    code.has-numbering{
        margin-left: 30px;
    }
    code.has-numbering.widther{
        margin-left: 35px;
    }
    .pre-numbering{
        margin: 0px;
        position: absolute;
        top: 0;
        left: 0;
        width: 20px;
        padding: 0.5em 3px 0.7em 5px;
        border-right: 1px solid #C3CCD0;
        text-align: right;
        color: #AAA;
        background-color: ;
    }
    .pre-numbering.widther {
        width: 35px;
    }
</style>

<!--è‡ªå®šä¹‰æ ·å¼è®¾ç½®-->
<style>
    
    
    .nav {
        width: 542px;
    }
    .nav.fullscreen {
        margin-left: -542px;
    }
    .nav-left {
        width: 120px;
    }
    
    
    @media screen and (max-width: 1468px) {
        .nav {
            width: 542px;
        }
        .nav.fullscreen {
            margin-left: -542px;
        }
        .nav-left {
            width: 150px;
        }
    }
    
    
    @media screen and (max-width: 1024px) {
        .nav {
            width: 542px;
            margin-left: -542px
        }
        .nav.fullscreen {
            margin-left: 0;
        }
        .nav .hide-list.fullscreen {
            left: 542px
        }
    }
    
    @media screen and (max-width: 426px) {
        .nav {
            width: 100%;
        }
        .nav-left {
            width: 100%;
        }
    }
    
    
    .nav-right .title-list nav a .post-title, .nav-right .title-list #local-search-result a .post-title {
        color: #383636;
    }
    
    
    .nav-right .title-list nav a .post-date, .nav-right .title-list #local-search-result a .post-date {
        color: #5e5e5f;
    }
    
    
    .nav-right nav a.hover, #local-search-result a.hover{
        background-color: #e2e0e0;
    }
    
    
    .nav-right nav a.hover > span{
        color: #ffffff !important;
    }
    

    /*åˆ—è¡¨æ ·å¼*/
    
    .post .pjax article .article-entry>ol, .post .pjax article .article-entry>ul, .post .pjax article>ol, .post .pjax article>ul{
        border: #e2dede solid 1px;
        border-radius: 10px;
        padding: 10px 32px 10px 56px;
    }
    .post .pjax article .article-entry li>ol, .post .pjax article .article-entry li>ul,.post .pjax article li>ol, .post .pjax article li>ul{
        padding-top: 5px;
        padding-bottom: 5px;
    }
    .post .pjax article .article-entry>ol>li, .post .pjax article .article-entry>ul>li,.post .pjax article>ol>li, .post .pjax article>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    .post .pjax article .article-entry li>ol>li, .post .pjax article .article-entry li>ul>li,.post .pjax article li>ol>li, .post .pjax article li>ul>li{
        margin-bottom: auto;
        margin-left: auto;
    }
    

    /* èƒŒæ™¯å›¾æ ·å¼ */
    
    


    /*å¼•ç”¨å—æ ·å¼*/
    

    /*æ–‡ç« åˆ—è¡¨èƒŒæ™¯å›¾*/
    
    .nav-right:before {
        content: ' ';
        display: block;
        position: absolute;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        opacity: 0.3;
        background: url("https://i.loli.net/2019/07/22/5d3521411f3f169375.png");
        background-repeat: no-repeat;
        background-position: 50% 0;
        -ms-background-size: cover;
        -o-background-size: cover;
        -moz-background-size: cover;
        -webkit-background-size: cover;
        background-size: cover;
    }
    

    
</style>







</html>
